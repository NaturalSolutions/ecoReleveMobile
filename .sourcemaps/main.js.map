{"version":3,"sources":["../../src/providers/protocols-service.ts","../../src/shared/geolocation.notification.service.ts","../../src/observations/observations.ts","../../src/login2/login2.ts","../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/providers/projects-service.ts","../../src/shared/map.model.ts","../../src/observation/popoverPage.ts","../../src/shared/ad.directive.ts","../../src/observation/proto-form-provider.ts","../../src/observation/proto-forms/avifaune/avifaune.ts","../../src/observation/proto-forms/protocol-form/popoverAutocompPage.ts","../../src/observation/proto-forms/batrachofaune/batrachofaune.ts","../../src/observation/proto-forms/herpetofaune/herpetofaune.ts","../../src/observation/proto-forms/mammofaune/mammofaune.ts","../../src/shared/network.service.ts","../../src/providers/obs/obs.ts","../../src/home/home.ts","../../src/shared/map.notification.service.ts","../../src/login/login.ts","../../src/projects/projects.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/providers/autocomplete-service.ts","../../src/models/avifaune-interface.ts","../../src/models/batrachofaune-interface.ts","../../src/models/herpetofaune-interface.ts","../../src/models/mammofaune-interface.ts","../../node_modules/moment/locale ^/.*$","../../src/app/app.component.ts","../../src/providers/auth.ts","../../src/shared/notification.service.ts","../../src/observation/proto-forms/protocol-form/protocol-form.ts","../../src/providers/posts-data/posts-data.ts","../../src/components/protocol-form/protocol-form.ts","../../src/components/map/map.ts","../../src/protocols/protocols.ts","../../src/observation/observation.ts"],"names":[],"mappings":"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CAAa;QACb,sDAAmB;QACnB,wDAAoB;QACpB,0CAAa;QACb,8CAAe;QACf,gDAAgB;QAChB,gCAAQ;QACR,gDAAgB;QAChB,uCAAW;QACX,yCAAW;QACX,qCAAU;QAXV,OAAE,GAAF,EAAE,CAAQ;QACV,cAAS,GAAT,SAAS,CAAI;QACb,oBAAe,GAAf,eAAe,CAAI;QACnB,qBAAgB,GAAhB,gBAAgB,CAAI;QACpB,aAAQ,GAAR,QAAQ,CAAK;QACb,gBAAW,GAAX,WAAW,CAAI;QACf,iBAAY,GAAZ,YAAY,CAAI;QAChB,SAAI,GAAJ,IAAI,CAAI;QACR,iBAAY,GAAZ,YAAY,CAAI;QAChB,aAAQ,GAAR,QAAQ,CAAG;QACX,cAAS,GAAT,SAAS,CAAE;QACX,YAAO,GAAP,OAAO,CAAG;IAErB,CAAC;IACL,YAAC;AAAD,CAAC;;;;;;;;;AC9BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5P2E;AAC7B;AACO;AACM;AACX;AACW;AAClB;AAED;AACxC,mDAAmD;AACnD,+DAA+D;AACX;AACpD,4CAA4C;AACC;AACC;AAI9C;IAYE,eAAmB,QAAkB,EAClB,SAAoB,EACpB,YAA0B,EACzB,OAAgB,EAChB,QAAkB,EAClB,cAA8B,EAC/B,OAAgB,EACf,IAAiB;QAPlB,aAAQ,GAAR,QAAQ,CAAU;QAClB,cAAS,GAAT,SAAS,CAAW;QACpB,iBAAY,GAAZ,YAAY,CAAc;QACzB,YAAO,GAAP,OAAO,CAAS;QAChB,aAAQ,GAAR,QAAQ,CAAU;QAClB,mBAAc,GAAd,cAAc,CAAgB;QAC/B,YAAO,GAAP,OAAO,CAAS;QACf,SAAI,GAAJ,IAAI,CAAa;QAEnC,IAAI,CAAC,aAAa,EAAE,CAAC;QAErB,8CAA8C;QAC9C,IAAI,CAAC,KAAK,GAAG;YACX,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,4DAAQ,EAAE;YACtC,oDAAoD;YACpD,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,wEAAY,EAAC;SAE7C,CAAC;IAEJ,CAAC;IA3BmC,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","file":"main.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\n\r\n@Injectable()\r\nexport class ProtocolsServiceProvider {\r\n  data:any;\r\n\r\n  constructor(public http: Http) {\r\n    console.log('Hello ProtocolsServiceProvider Provider');\r\n  }\r\n  load(){\r\n    if(this.data){\r\n      return Promise.resolve(this.data);\r\n    }\r\n\r\n    return new Promise(resolve =>{\r\n      this.http.get('assets/data/protocols.json')\r\n      .map(res => res.json())\r\n      .subscribe(data => {\r\n        console.log('projets chargés');\r\n        this.data = data;\r\n        resolve(this.data);\r\n      });\r\n\r\n    });\r\n\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/protocols-service.ts","import { Injectable, Inject } from '@angular/core';\r\nimport { Subject }    from 'rxjs/Subject';\r\nimport {Geolocation } from '@ionic-native/geolocation'\r\n\r\n@Injectable()\r\nexport class GeoService {\r\n  protected notify = new Subject<any>();\r\n  private  latitude : number\r\n  private longitude:number\r\n  /**\r\n   * Observable string streams\r\n   */\r\n  notifyObservable$ = this.notify.asObservable();\r\n\r\n  constructor(private geolocation: Geolocation){\r\n      /*this.geolocation.getCurrentPosition().then((position)=> {\r\n        this.latitude = position.coords.latitude\r\n        this.longitude = position.coords.longitude\r\n      })*/\r\n      this.notifyOther()\r\n  }\r\n\r\n  public notifyOther() {\r\n    this.geolocation.getCurrentPosition().then((position)=> {\r\n      this.notify.next([position.coords.latitude, position.coords.longitude]);\r\n      //this.latitude = position.coords.latitude\r\n     // this.longitude = position.coords.longitude\r\n    })\r\n    /*if (this.latitude && this.longitude) {\r\n      this.notify.next([this.latitude,this.longitude]);\r\n    }*/\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/geolocation.notification.service.ts","import { Component,ElementRef } from '@angular/core'\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular'\r\nimport {ObsProvider} from '../providers/obs/obs'\r\nimport { ProtocolsPage } from '../protocols/protocols'\r\nimport {ProtocolsServiceProvider} from '../providers/protocols-service'\r\nimport { ObservationPage} from '../observation/observation'\r\n//import {MapComponent} from '../components/map/map'\r\n//import { Subscription } from 'rxjs/Subscription'\r\n//import { MapNotificationService } from '../shared/map.notification.service'\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-observations',\r\n  templateUrl: 'observations.html',\r\n  providers : [\r\n    ProtocolsServiceProvider//,\r\n    //MapComponent\r\n  ]\r\n})\r\nexport class ObservationsPage {\r\n\r\n  public obs :any;\r\n  public waypoints :any;\r\n  obsSegment: string= 'listes';\r\n  protocols : any;\r\n  public map : any\r\n  public projId : any\r\n  //private subscription: Subscription;\r\n\r\n  constructor(\r\n  public navCtrl: NavController, \r\n  public navParams: NavParams,\r\n  private data : ObsProvider,\r\n  public protocolsService : ProtocolsServiceProvider,\r\n  private el: ElementRef,\r\n  //public map : MapComponent,\r\n  //private NotificationService: MapNotificationService\r\n\r\n  ) {\r\n    this.projId = navParams.get(\"projId\")\r\n    this.loadProtocols()\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    \r\n  }\r\n  ionViewDidEnter(){\r\n    console.log(' obs page enter')\r\n    //this.drawMap()\r\n    this.data.getObs(this.projId).then((data)=> {\r\n      // set label to display for each obs\r\n      let points= [];\r\n      for (let dt in data) {\r\n        let label = data[dt]['protocole'] + ': ' +  data[dt]['type_inventaire'] \r\n        if(label.length>32) {\r\n          label = label.substring(0,28) + '...';\r\n        }\r\n        data[dt]['label'] = label\r\n        let pos = {}\r\n        pos['latitude'] = parseFloat(data[dt]['latitude'])\r\n        pos['longitude'] = parseFloat(data[dt]['longitude'])\r\n        pos['id'] = data[dt]['id']\r\n        pos['dateObs'] = data[dt]['dateObs'] \r\n        pos['espece'] = data[dt]['nom_vernaculaire'] \r\n        points.push(pos)\r\n      }\r\n      this.obs = data\r\n      this.waypoints = points\r\n     }\r\n\r\n    );\r\n    // when map is loaded, add waypoints\r\n    // subscription to notify loading map\r\n    /*this.subscription = this.NotificationService.notifyObservable$.subscribe((res) => {\r\n      let map = res.map\r\n      this.map.addStations(this.waypoints, map)\r\n    })*/\r\n    \r\n  }\r\n  navigateToDetail(protocole,id){\r\n    // get selected protocol\r\n    let protocol = this.protocols.find(x => x.name === protocole);\r\n    console.log(protocol, id);\r\n    this.navCtrl.push(ObservationPage, {protoObj:protocol, obsId : id, 'projId' : this.projId});\r\n  }\r\n  newObs(){\r\n    console.log('new obs');\r\n    this.navCtrl.push(ProtocolsPage, {'projId' : this.projId}).then(\r\n      response => {\r\n        console.log('Response ' + response);\r\n      },\r\n      error => {\r\n        console.log('Error: ' + error);\r\n      }\r\n    ).catch(exception => {\r\n      console.log('Exception ' + exception);\r\n    });\r\n  }\r\n  getImage(protocole,finished){\r\n    let src=\"\";\r\n    if(finished){\r\n      switch(protocole) {\r\n          case \"avifaune\":\r\n              src=\"avifaune.png\";\r\n              break;\r\n          case \"herpetofaune\":\r\n              src=\"herpeto.png\";   \r\n              break;\r\n           case \"mammofaune\":\r\n             src=\"mammo.png\";  //TODO update picto \r\n            break;\r\n            case \"batrachofaune\":\r\n            src=\"batracho.png\";  //TODO update picto \r\n            break;\r\n\r\n          default:\r\n              src=\"avifaune.jpg\";  //TODO update picto \r\n      }\r\n\r\n    } else {\r\n      switch(protocole) {\r\n          case \"avifaune\":\r\n              src=\"avifaune_progress.png\"; //TODO update picto \r\n              break;\r\n          case \"herpetofaune\":\r\n              src=\"herpeto_progress.png\";   //TODO update picto \r\n              break;\r\n           case \"mammofaune\":\r\n             src=\"mammo_progress.png\";  //TODO update picto \r\n            break;\r\n            case \"batrachofaune\":\r\n            src=\"batracho_progress.png\";  //TODO update picto \r\n            break;\r\n\r\n          default:\r\n              src=\"avifaune_progress.png\";  //TODO update picto \r\n      }\r\n\r\n    }\r\n    return ('./assets/icones_obs/' + src);\r\n  }\r\n  loadProtocols (){\r\n    this.protocolsService.load()\r\n    .then(data =>{\r\n      this.protocols = data;\r\n    })\r\n\r\n  }\r\n  drawMap(){\r\n      let self = this\r\n    setTimeout(function(){ \r\n        let mapEl = self.el.nativeElement.querySelector('#map')\r\n        if(mapEl){\r\n            //let mapEl = document.getElementById('map');\r\n            self.map = L.map(mapEl);\r\n            L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n            //bounds: this._bounds,\r\n            minZoom: 8,\r\n            maxZoom: 16,\r\n            attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n          }).addTo(self.map);\r\n          self.addStations()\r\n        }\r\n    }, 200);\r\n\r\n\r\n  }\r\n  onSegmentChanged($event) {\r\n    if ($event._value == 'stations') {\r\n        this.drawMap();\r\n     }\r\n  }\r\n  addStations(){\r\n      let list =this.waypoints\r\n      let center : any\r\n      if(list.length>0){\r\n        \r\n\r\n      //this.map.setView(center, 14)\r\n        //TODO change icone\r\n        var icon = L.icon({\r\n          iconUrl: 'assets/icon/marker.png',\r\n         // iconAnchor:   [0, 0], // point of the icon which will correspond to marker's location\r\n        //shadowAnchor: [4, 62],  // the same for the shadow\r\n        //popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor\r\n      })\r\n        let markers = []\r\n        for (let i =0; i<list.length;i++) {\r\n          let waypoint = list[i]\r\n          if(waypoint.latitude && waypoint.longitude){\r\n            var marker = L.marker([waypoint.latitude, waypoint.longitude]);\r\n            marker.bindPopup(\"<div class='mappopup'><b>\" + waypoint.espece + \"</b><br>Station #\" + waypoint.id +\"</div>\");\r\n            markers.push(marker)\r\n          }\r\n        }\r\n\r\n        var group =  L.featureGroup(markers);\r\n        group.addTo(this.map);\r\n        this.map.fitBounds(group.getBounds());\r\n\r\n      } else {\r\n        center = L.latLng(43.2915582, 5.372177)\r\n        this.map.setView(center, 8)\r\n      }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observations/observations.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,AlertController } from 'ionic-angular';\r\nimport { FormBuilder, FormGroup,Validators } from '@angular/forms';\r\nimport { ProjectsPage } from '../projects/projects';\r\n//import {Headers, Http, RequestOptions} from \"@angular/http\";\r\n//import {JwtHelper} from \"angular2-jwt\";\r\n//import {Storage} from \"@ionic/storage\";\r\nimport {AuthService} from \"../providers/auth\";\r\n//import {JsSHA} from \"../../node_modules/jssha\"\r\n//import * as JsSHA from 'jssha';\r\nimport 'rxjs/add/operator/map';\r\n\r\n\r\n\r\n@IonicPage({\r\n  name : 'login2',\r\n  segment : 'login2'\r\n})\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login2.html',\r\n // providers : [AuthService\r\n  //]\r\n})\r\nexport class LoginPage2 {\r\n\r\n  public formModel: FormGroup;\r\n  /*private LOGIN_URL = \"http://vps471185.ovh.net/portal/security/login\";\r\n  private checkuser_url = \"http://vps471185.ovh.net/portal/checkUser\";*/\r\n  //private SIGNUP_URL = \"http://localhost:3001/users\";\r\n\r\n  \r\n  // When the page loads, we want the Login segment to be selected\r\n  //authType: string = \"login\";\r\n  // We need to set the content type for the server\r\n  //contentHeader = new Headers({\"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"});\r\n  //error: string;\r\n  //jwtHelper = new JwtHelper();\r\n  //user: string;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private  builder: FormBuilder,\r\n    // added to auth\r\n    //private http: Http, private storage: Storage,\r\n    private alertCtrl: AlertController,\r\n    private auth: AuthService\r\n  ) {\r\n\r\n    \r\n  }\r\n\r\n  /*ionViewDidLoad() {\r\n    this.formModel = this.builder.group({\r\n        'login': [\r\n          //'', // default value\r\n          //[Validators.required]\r\n        ],\r\n        'password': [\r\n          // '',\r\n          //[Validators.required]\r\n        ]\r\n    });\r\n  }*/\r\n\r\n  /*onSubmit(value) {\r\n    this.navCtrl.push(ProjectsPage)\r\n  }*/\r\n  // added to implement login\r\n\r\n//**********************************\r\n\r\n  authenticate(credentials) {\r\n    this.auth.checkuser(credentials).then(data =>{\r\n      this.auth.login(data).then(data=>{\r\n        this.navCtrl.setRoot(ProjectsPage);\r\n      })\r\n    });\r\n\r\n  }\r\n//****************************************************** */\r\n  /*checkuser(credentials) {\r\n\r\n    this.http.post(this.checkuser_url,  'login='+credentials.login, { headers: this.contentHeader })\r\n    .map(res => res.json())\r\n    .subscribe(\r\n      data => {\r\n        credentials.userId = data;\r\n        this.login(credentials)\r\n\r\n      },\r\n      err => this.error = err\r\n    );\r\n  }\r\n  login(credentials) {\r\n    let password = credentials.password;\r\n    let userId =  parseInt(credentials.userId);\r\n    credentials.userId = userId;\r\n    credentials.password = this.pwd(password);\r\n    let strParams = 'userId='+userId+'&password='+this.pwd(password);\r\n    let options = new RequestOptions({ headers: this.contentHeader, withCredentials: true });\r\n    \r\n    \r\n    \r\n    this.http.post(this.LOGIN_URL, strParams, options).toPromise()\r\n    .then(response=>{\r\n       console.log(response);\r\n       let headers = response.headers;\r\n       console.log(headers);\r\n       this.navCtrl.setRoot(ProjectsPage)\r\n    })\r\n    .catch(err=>console.log(err));\r\n\r\n  }\r\n\r\n  signup(credentials) {\r\n    this.http.post(this.SIGNUP_URL, JSON.stringify(credentials), { headers: this.contentHeader })\r\n      .map(res => res.json())\r\n      .subscribe(\r\n        data => this.authSuccess(data.id_token),\r\n        err => this.error = err\r\n      );\r\n  }\r\n\r\n /* logout() {\r\n    this.storage.remove('token');\r\n    this.user = null;\r\n  }\r\n\r\n  authSuccess(token) {\r\n    this.error = null;\r\n    this.storage.set('token', token);\r\n    this.user = this.jwtHelper.decodeToken(token).username;\r\n    this.storage.set('profile', this.user);\r\n  }\r\n  pwd(pwd) {\r\n    \r\n    pwd = window.btoa(decodeURI(decodeURIComponent( pwd )));\r\n    var hashObj = new JsSHA('SHA-1', 'B64', 1);\r\n    \r\n    hashObj.update(pwd);\r\n    pwd = hashObj.getHash('HEX');\r\n    return pwd;\r\n  }*/\r\n\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/login2/login2.ts","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 178;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 178\n// module chunks = 6","var map = {\n\t\"../login/login.module\": [\n\t\t840,\n\t\t4\n\t],\n\t\"../login2/login2.module\": [\n\t\t841,\n\t\t5\n\t],\n\t\"../observation/observation.module\": [\n\t\t842,\n\t\t3\n\t],\n\t\"../observations/observations.module\": [\n\t\t843,\n\t\t2\n\t],\n\t\"../projects/projects.module\": [\n\t\t844,\n\t\t1\n\t],\n\t\"../protocols/protocols.module\": [\n\t\t845,\n\t\t0\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 223;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 223\n// module chunks = 6","import { Injectable } from '@angular/core';\r\nimport { Http,Headers } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport { Storage } from '@ionic/storage';\r\nimport {AuthService} from \"../providers/auth\";\r\nimport { MapModel } from '../shared/map.model'\r\nimport _ from 'lodash';\r\nimport * as geojsonBounds from 'geojson-bounds';\r\n\r\n\r\n@Injectable()\r\nexport class ProjectsServiceProvider {\r\n  data:any;\r\n mapModel = new MapModel()\r\n  contentHeader = new Headers({'Content-Type': 'application/json'});\r\n  constructor(public http: Http, public storage : Storage,private auth: AuthService) {\r\n\r\n  }\r\n  load(){\r\n    if(this.data){\r\n      return Promise.resolve(this.data);\r\n    }\r\n\r\n    return new Promise((resolve , reject) =>{\r\n      //let headers = new Headers({});\r\n      //this.contentHeader.append('Authorization', this.auth.AuthToken);\r\n      //this.contentHeader.append('Cookie', 'ecoReleve-Core='+this.auth.AuthToken);\r\n      //console.log(headers);\r\n      //this.http.get('assets/data/projects.json')\r\n      this.http.get('http://vps471185.ovh.net/ecoReleve-Core/projects/?criteria=%5B%5D&page=1&per_page=200&offset=0&order_by=%5B%5D&typeObj=1', { headers: this.contentHeader , withCredentials: true })\r\n      .map(res => res.json())\r\n      .subscribe(data => {\r\n        this.data = data[1];\r\n        for (let proj in this.data) {\r\n            this.data[proj]['isLoaded'] = false;\r\n        }\r\n        resolve(this.data);\r\n      },\r\n      err => {\r\n          //reject(err);\r\n          resolve(null);\r\n      });\r\n\r\n    });\r\n\r\n\r\n  }\r\n\r\n  loadGeometry(id){\r\n\r\n    return new Promise(resolve =>{\r\n      //this.http.get('assets/data/projects.json')\r\n      this.http.get('http://vps471185.ovh.net/ecoReleve-Core/projects/'+ id, { headers: this.contentHeader , withCredentials: true })\r\n      .map(res => res.json())\r\n      .subscribe(data => {\r\n        //console.log('**** geo data data from ovh********');\r\n        //console.log(data[\"poly\"]);\r\n        let geo = data[\"geom\"];\r\n        //console.log('passed in projects service');\r\n\r\n        // Mise en cache des tuiles\r\n        // get bounds for emprise\r\n       /* var extent = geojsonBounds.extent(geo);\r\n        this.mapModel.initialize();\r\n        this.mapModel.downloadTiles(extent)*/\r\n\r\n        resolve(geo);\r\n      });\r\n\r\n    });\r\n  }\r\n  getProj(){\r\n\r\n    return new Promise(resolve =>{\r\n      this.storage.get('projects').then((data)=>{\r\n       /* const myOrderedArray = _.orderBy(data, proj => proj.ID, ['desc'])\r\n        console.log(myOrderedArray);*/\r\n        resolve(data);\r\n      });\r\n    });\r\n  }\r\n  \r\n  saveProject(proj){\r\n\r\n    return new Promise(resolve =>{\r\n    this.storage.get('projects').then((data)=>{\r\n      let toStore ; \r\n      /*if(data != null){\r\n        // some obs exisits\r\n\r\n        // update existing obs\r\n        if(proj.ID) {\r\n\r\n          _.remove(data, function(prj) {\r\n            return prj.ID == proj.ID;\r\n        });\r\n\r\n\r\n\r\n        }\r\n        data.push(proj);\r\n        toStore = data;\r\n        //this.storage.set('projects', data);\r\n\r\n      } else {\r\n        // storage is empty\r\n        let array = [];\r\n        array.push(proj);\r\n        toStore = array;\r\n        //this.storage.set('projects', array);\r\n      }\r\n      */\r\n      let array = [];\r\n      array.push(proj);\r\n      toStore = array;\r\n\r\n      this.storage.set('projects', toStore).then((data)=>{\r\n\r\n        resolve(1);\r\n      });\r\n    });\r\n  });\r\n  }\r\n\r\n\r\n  update(projects){\r\n    this.storage.set('projects', projects).then((data)=>{\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/projects-service.ts","import * as _ from 'lodash'\r\nimport * as L from 'leaflet'\r\nimport sphericalmercator from '@mapbox/sphericalmercator'\r\n\r\ndeclare let tileLayerCordova: any\r\n\r\n\r\nexport class MapModel {\r\n\r\n  public tileLayer\r\n  private sphericalMercator\r\n  public cacheZoom: number = 17\r\n  public center\r\n  private centerBounds: any\r\n  public trace\r\n  public traceBounds: any\r\n\r\n  constructor(options: any = {}) {\r\n\r\n    /*this.sphericalMercator = new sphericalmercator({\r\n      size: options.tileSize || 256\r\n    })*/\r\n  }\r\n\r\n  initialize(options?): any {\r\n    options = options || {};\r\n    return new Promise((resolve, reject) => {\r\n      tileLayerCordova(L)\r\n      this.tileLayer = L['tileLayerCordova'](_.get(options, 'layerUrl', 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'), {\r\n        folder: _.get(options, 'folder', 'ecoreleve'),\r\n        name: 'tile',\r\n        autocache : true\r\n      }, () => {\r\n        resolve()\r\n      })\r\n    })\r\n  }\r\n\r\n  setCenter(lat, lng) {\r\n    this.center = {\r\n      lat: lat,\r\n      lng: lng\r\n    }\r\n\r\n    let startPt = this.px(this.center, this.cacheZoom)\r\n    let winRadiusX = window.innerWidth / 2\r\n    let winRadiusY = window.innerHeight / 2\r\n\r\n    let startBoundsMin = this.ll({\r\n      x: startPt.x - winRadiusX,\r\n      y: startPt.y + winRadiusY\r\n    }, this.cacheZoom)\r\n\r\n    let startBoundsMax = this.ll({\r\n      x: startPt.x + winRadiusX,\r\n      y: startPt.y - winRadiusY\r\n    }, this.cacheZoom)\r\n\r\n    this.centerBounds = {\r\n      minLat: startBoundsMin.lat,\r\n      maxLat: startBoundsMax.lat,\r\n      minLng: startBoundsMin.lng,\r\n      maxLng: startBoundsMax.lng\r\n    }\r\n  }\r\n\r\n  setTrace(coordinates) {\r\n    this.trace = _.clone(coordinates)\r\n    //this.trace = coordinates\r\n    this.traceBounds = this.getTraceBounds(coordinates)\r\n  }\r\n\r\n  getTraceBounds(coordinates) {\r\n    let minLng = 500\r\n    let maxLng = -500\r\n    let minLat = 500\r\n    let maxLat = -500\r\n    for (let i = 0; i < coordinates.coordinates.length; i++) {\r\n      let pt = coordinates.coordinates[i]\r\n      let lng = pt[0]\r\n      let lat = pt[1]\r\n      minLat = Math.min(minLat, lat)\r\n      maxLat = Math.max(maxLat, lat)\r\n      minLng = Math.min(minLng, lng)\r\n      maxLng = Math.max(maxLng, lng)\r\n    }\r\n\r\n    return {\r\n      minLat: minLat,\r\n      maxLat: maxLat,\r\n      minLng: minLng,\r\n      maxLng: maxLng\r\n    }\r\n  }\r\n\r\n  getCacheBounds() {\r\n    if (this.centerBounds && !this.traceBounds) {\r\n      return _.clone(this.centerBounds)\r\n      //return this.centerBounds\r\n    } else if (!this.centerBounds && this.traceBounds) {\r\n      return _.clone(this.traceBounds)\r\n      //return this.traceBounds\r\n    } else if (this.centerBounds && this.traceBounds) {\r\n      let obj = {\r\n        minLng: Math.min(this.traceBounds.minLng, this.centerBounds.minLng),\r\n        maxLng: Math.max(this.traceBounds.maxLng, this.centerBounds.maxLng),\r\n        minLat: Math.min(this.traceBounds.minLat, this.centerBounds.minLat),\r\n        maxLat: Math.max(this.traceBounds.maxLat, this.centerBounds.maxLat)\r\n      }\r\n      return obj\r\n    }\r\n    return null\r\n  }\r\n\r\n  getCacheTileBounds() {\r\n    let cacheBounds = this.getCacheBounds()\r\n    let minX = this.tileLayer.getX(cacheBounds.minLng, this.cacheZoom)\r\n    let maxX = this.tileLayer.getX(cacheBounds.maxLng, this.cacheZoom)\r\n    let minY = this.tileLayer.getY(cacheBounds.minLat, this.cacheZoom)\r\n    let maxY = this.tileLayer.getY(cacheBounds.maxLat, this.cacheZoom)\r\n\r\n    let swTileBounds = this.bbox({ x: minX, y: minY }, this.cacheZoom)\r\n    let neTileBounds = this.bbox({ x: maxX, y: maxY }, this.cacheZoom)\r\n\r\n    return L.latLngBounds(L.latLng(swTileBounds.south, swTileBounds.west), L.latLng(neTileBounds.north, neTileBounds.east))\r\n  }\r\n\r\n  isInCacheTileBounds(options) {\r\n    return this.getCacheTileBounds().contains(options);\r\n  }\r\n\r\n  px(latlng, z) {\r\n    let pt = this.sphericalMercator.px([latlng.lng, latlng.lat], z)\r\n    return {\r\n      x: pt[0],\r\n      y: pt[1]\r\n    }\r\n  }\r\n\r\n  ll(pt, z) {\r\n    let latlng = this.sphericalMercator.ll([pt.x, pt.y], z)\r\n    return {\r\n      lat: latlng[1],\r\n      lng: latlng[0]\r\n    }\r\n  }\r\n\r\n  bbox(pt, z) {\r\n    let bbox = this.sphericalMercator.bbox(pt.x, pt.y, this.cacheZoom)\r\n\r\n    return {\r\n      north: bbox[3],\r\n      south: bbox[1],\r\n      east: bbox[2],\r\n      west: bbox[0]\r\n    }\r\n  }\r\n\r\n  downloadTiles(options=null, minZoom=null,maxZoom=null) {\r\n    return new Promise((resolve, reject) => {\r\n      let cacheBounds,minZoomLoad, maxZoomLoad\r\n      if(options) {\r\n        cacheBounds = options\r\n      } else {\r\n        cacheBounds = this.getCacheBounds()\r\n      }\r\n      if(minZoom){\r\n        minZoomLoad = minZoom\r\n      }else {\r\n        minZoomLoad = this.cacheZoom\r\n      }\r\n\r\n      if(maxZoom){\r\n        maxZoomLoad = maxZoom\r\n      }else {\r\n        maxZoomLoad = this.cacheZoom\r\n      }\r\n\r\n      let tileList = this.tileLayer.calculateXYZListFromBounds({\r\n        getNorthWest: function () {\r\n          return {\r\n            lat: cacheBounds.maxLat,\r\n            lng: cacheBounds.minLng\r\n          }\r\n        },\r\n        getSouthEast: function () {\r\n          return {\r\n            lat: cacheBounds.minLat,\r\n            lng: cacheBounds.maxLng\r\n          }\r\n        }\r\n      }, minZoomLoad, maxZoomLoad)\r\n      this.tileLayer.downloadXYZList(tileList,\r\n        // Overwrite existing tiles on disk? if no then a tile already on disk will be kept, which can be a big time saver\r\n        false,\r\n        // Progress callback\r\n        (done, total) => {\r\n          var percent = Math.round(100 * done / total)\r\n          console.log('downloadTiles Progress', done + \" / \" + total + \" = \" + percent + \"%\")\r\n        },\r\n        // Complete callback\r\n        () => {\r\n          this.tileLayer.getDiskUsage((filecount, bytes) => {\r\n            let kilobytes = Math.round(bytes / 1024);\r\n            console.log('downloadTiles Done', filecount + \" files\" + \" : \" + kilobytes + \" kB\");\r\n          });\r\n          console.log('Done')\r\n          resolve()\r\n        },\r\n        // Error callback\r\n        (error) => {\r\n          console.log(\"downloadTiles Failed: \", error)\r\n          //reject();\r\n          resolve()\r\n        }\r\n      )\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/shared/map.model.ts","import { Component, ViewChild, ElementRef } from '@angular/core';\r\n\r\nimport { PopoverController, NavController,ViewController, NavParams,AlertController } from 'ionic-angular';\r\nimport { ProtocolsPage } from '../protocols/protocols'\r\nimport { ObservationsPage } from '../observations/observations'\r\nimport {ObsProvider} from '../providers/obs/obs'\r\n\r\n@Component({\r\n  template: `\r\n    <ion-list class=\"popover-page\">\r\n      <ion-item class=\"actionItem\" (click)=\"changeProtocol()\">\r\n        <ion-label>Nouvelle observation</ion-label>\r\n      </ion-item>\r\n      <ion-item class=\"\" (click)=\"displayObs()\">\r\n        <ion-label>Mes observations</ion-label>\r\n      </ion-item>\r\n      <ion-item class=\"actionItem\"   (click)=\"takePicture()\">\r\n      <ion-label>Prendre une photo</ion-label>\r\n    </ion-item>\r\n    <ion-item class=\"\"  (click)=\"deleteObs()\">\r\n    <ion-label>Supprimer cette observation</ion-label>\r\n    </ion-item>\r\n    <ion-item class=\"actionItem\" (click)=\"closePopover()\">\r\n    <ion-label>Retour</ion-label>\r\n    </ion-item>\r\n\r\n    </ion-list>\r\n  `\r\n})\r\nexport class PopoverPage {\r\n  parent : any;\r\n  private obsId : number;\r\n  private projId : number;\r\n  constructor( \r\n    public navCtrl: NavController,\r\n    private el: ElementRef,\r\n    public viewCtrl: ViewController,\r\n    public navParams: NavParams,\r\n    public data : ObsProvider,\r\n    private alertCtrl: AlertController\r\n  \r\n  ) {\r\n    this.obsId = navParams.data.obsId \r\n    this.parent  = navParams.data.parent \r\n    this.projId = navParams.data.projId\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n\r\n  }\r\n  takePicture(){\r\n    this.parent.takePicture();\r\n    this.viewCtrl.dismiss();\r\n  }\r\n  changeProtocol(){\r\n    this.viewCtrl.dismiss();\r\n    //this.navCtrl.push(ProtocolsPage)\r\n    this.parent.navCtrl.pop()\r\n  }\r\n  closePopover(){\r\n    this.viewCtrl.dismiss();\r\n  }\r\n  displayObs(){\r\n    this.viewCtrl.dismiss();\r\n    //this.navCtrl.push(ObservationsPage)\r\n    this.parent.navCtrl.pop()\r\n    this.parent.navCtrl.pop()\r\n  }\r\n  deleteObs(){\r\n    this.viewCtrl.dismiss()\r\n    this.deleteConfirm()\r\n  }\r\n  deleteConfirm() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Suppression d\\'observation',\r\n      message: 'Etes vous sur(e) de supprimer cette observation?',\r\n      buttons: [\r\n        {\r\n          text: 'Annuler',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'OK',\r\n          handler: () => {\r\n            let data = {\"action\" : \"removeObs\", \"protoId\" :this.obsId  };\r\n            this.dismiss(data)\r\n            this.data.deleteObs(this.obsId)\r\n            this.parent.navCtrl.pop()\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  dismiss(data) {\r\n    //let data = { 'foo': 'bar' };\r\n    this.viewCtrl.dismiss(data);\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/observation/popoverPage.ts","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[ad-host]',\r\n})\r\nexport class AdDirective {\r\n  constructor(public viewContainerRef: ViewContainerRef) { }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/ad.directive.ts","import {AvifauneComponent} from './proto-forms/avifaune/avifaune'\r\nimport { BatrachofauneComponent } from './proto-forms/batrachofaune/batrachofaune'\r\nimport {  HerpetofauneComponent } from './proto-forms/herpetofaune/herpetofaune'\r\nimport {  MammofauneComponent } from './proto-forms/mammofaune/mammofaune'\r\n\r\n\r\nexport class AdFormService {\r\n\r\n    constructor(){\r\n    }\r\n    getComponent(protoname) {\r\n    let component : any \r\n    switch (protoname) {\r\n        case 'Avifaune':\r\n            component = AvifauneComponent\r\n            break\r\n        case 'Batracho':\r\n            component = BatrachofauneComponent\r\n            break\r\n        case 'Herpeto':\r\n            component = HerpetofauneComponent\r\n            break\r\n        case 'Mammo':\r\n            component = MammofauneComponent\r\n            break\r\n    }\r\n    return component\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-form-provider.ts","\r\nimport { Component } from '@angular/core';\r\nimport {ProtocolFormComponent } from '../protocol-form/protocol-form';\r\nimport { Validators } from '@angular/forms';\r\nimport {Avifaune} from '../../../models/avifaune-interface';\r\n\r\n@Component({\r\n  selector: 'avifaune',\r\n  templateUrl: 'avifaune.html'\r\n})\r\nexport class AvifauneComponent extends ProtocolFormComponent {\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit(Avifaune);\r\n  }\r\n\r\n  getFormModel(model){\r\n        return this.builder.group({\r\n        'protocole':'Avifaune',\r\n        'type_inventaire': [\r\n          model.type_inventaire, // default value\r\n          [Validators.required]\r\n        ],\r\n        'nom_vernaculaire': [\r\n           model.nom_vernaculaire,\r\n          [Validators.required]\r\n        ],\r\n        'effectif' : [\r\n           model.effectif,\r\n          [Validators.required]\r\n        ],\r\n        'type_milieu' : [\r\n          model.type_milieu\r\n        ],\r\n        'comportement'  : [\r\n           model.comportement\r\n        ],\r\n        'sexe': [\r\n           model.sexe\r\n        ],\r\n        'code_atlas' : [\r\n           model.code_atlas\r\n        ],\r\n        'hauteur_vol': [\r\n           model.hauteur_vol\r\n        ], \r\n         'latitude' : [\r\n            model.latitude\r\n          ],\r\n         'longitude' : [\r\n           model.longitude\r\n          ],\r\n         'dateObs' : [\r\n           model.dateObs\r\n          ]\r\n      });\r\n      // set date value\r\n      /*this.dateObs =  Date.now();\r\n      this.formModel.value.dateObs = this.dateObs;\r\n      // detect form changes to activate \"save current obs\"\r\n      this.formModel.valueChanges.subscribe(data => {\r\n        this.formChanged = true;\r\n    })*/\r\n  }\r\n/*\r\n  onSubmit(value) {\r\n\r\n    // check if model is valid\r\n    \r\n    if (!this.formModel.invalid) {\r\n      value.finished = true;\r\n      this.formUpdateData(value);\r\n      this.navCtrl.push(ObservationsPage)\r\n    }\r\n  }\r\n\r\n  saveCurrent(){\r\n    let value = this.formModel.value;\r\n    value.finished = false;\r\n    this.formUpdateData(value);\r\n  }\r\n\r\n  formUpdateData(value) {\r\n    // set date value\r\n    value.dateObs = this.dateObs;\r\n    // set latitude & longitude\r\n   value.latitude = this.latitude;\r\n   value.longitude = this.longitude;\r\n    // set id value if exists \r\n    if(this.obsId){\r\n        this.formModel.value.id = this.obsId;\r\n    }\r\n    this.data.saveObs(value)\r\n    this.obsSaved = true;\r\n  }\r\n\r\n  handleLatChange(lat){\r\n    console.log('form model latitude :')\r\n    lat = lat.toFixed(5);\r\n    this.formModel.value.latitude = lat;\r\n    console.log(this.formModel.value)\r\n    this.latitude = lat;\r\n  \r\n  }\r\n  handleLonChange(lon){\r\n      lon = lon.toFixed(5);\r\n    this.formModel.value.longitude = lon;\r\n    this.longitude = lon;\r\n\r\n  }\r\n  ionViewDidLoad() {\r\n    console.log('page chargée')\r\n  }\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n  }*/\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-forms/avifaune/avifaune.ts","import { Component,ElementRef,Renderer } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { NavController,NavParams,ViewController } from 'ionic-angular';\r\nimport { CompleteTaxaService } from '../../../providers/autocomplete-service';\r\n/*import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { PopoverController, NavController,ViewController, NavParams,AlertController } from 'ionic-angular';*/\r\n\r\n\r\n@Component({\r\n    selector: 'page-autocompTaxa',\r\n  template: `\r\n  <div class=\"autocomp\">\r\n  <ion-searchbar\r\n  [(ngModel)]=\"searchTerm\"\r\n  [showCancelButton]=\"shouldShowCancel\"\r\n  (ionInput)=\"onSearchInput($event)\"\r\n  (ionCancel)=\"onCancel($event)\">\r\n</ion-searchbar>\r\n<div *ngIf=\"searching\" class=\"spinner-container\">\r\n<ion-spinner></ion-spinner>\r\n</div>\r\n\r\n<ion-list>\r\n<ion-item *ngFor=\"let item of items\" (click)=\"getSelected($event)\">\r\n    {{item.vernaculaire}}\r\n</ion-item>  \r\n</ion-list>\r\n</div>\r\n\r\n\r\n  <!--\r\n  \r\n  <ion-header>\r\n  <ion-navbar color=\"primary\">\r\n    <ion-title>\r\n      Recherche d'espèce\r\n    </ion-title>\r\n  </ion-navbar>\r\n</ion-header>\r\n \r\n<ion-content>\r\n \r\n    <ion-searchbar [(ngModel)]=\"searchTerm\" [formControl]=\"searchControl\" (ionInput)=\"onSearchInput()\"></ion-searchbar>\r\n \r\n    <div *ngIf=\"searching\" class=\"spinner-container\">\r\n        <ion-spinner></ion-spinner>\r\n    </div>\r\n \r\n    <ion-list>\r\n        <ion-item *ngFor=\"let item of items\">\r\n            {{item.name}}\r\n        </ion-item>\r\n    </ion-list>\r\n \r\n</ion-content>  -->\r\n  `,\r\n  providers : [\r\n    CompleteTaxaService\r\n  ]\r\n})\r\nexport class PopoverAutocompPage {\r\n    searchTerm: string = '';\r\n    searchControl: FormControl;\r\n    items: any;\r\n    searching: any = false;\r\n    protocole : any;\r\n  \r\n  \r\n    parent : any;\r\n\r\n  constructor( \r\n    public navCtrl: NavController,\r\n    public completeTaxaService: CompleteTaxaService,\r\n    //private el: ElementRef,\r\n    public viewCtrl: ViewController,\r\n    public navParams: NavParams,\r\n    private elementRef: ElementRef,\r\n    public renderer: Renderer\r\n   // public data : ObsProvider,\r\n   // private alertCtrl: AlertController\r\n  \r\n  ) {\r\n    this.searchControl = new FormControl();\r\n    this.parent  = navParams.data.parent\r\n    this.protocole = navParams.data.protocole\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n    //search bar is wrapped with a div so we get the child input\r\n    const searchInput = this.elementRef.nativeElement.querySelector('input');\r\n    setTimeout(() => {\r\n      //delay required or ionic styling gets finicky\r\n      this.renderer.invokeElementMethod(searchInput, 'focus', []);\r\n    }, 100);\r\n    \r\n\r\n\r\n\r\n\r\n           this.setFilteredItems();\r\n    \r\n           this.searchControl.valueChanges.debounceTime(700).subscribe(search => {\r\n    \r\n               this.searching = false;\r\n               this.setFilteredItems();\r\n    \r\n           });\r\n    \r\n    \r\n       }\r\n    setFilteredItems() {\r\n        if(this.searchTerm && (this.searchTerm.length > 2)) {\r\n          this.completeTaxaService.getResults(this.searchTerm, this.protocole).then(data =>{\r\n            this.items = data;\r\n            this.searching = false;\r\n          })\r\n        }\r\n               \r\n        \r\n    }\r\n /* deleteConfirm() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Suppression d\\'observation',\r\n      message: 'Etes vous sur(e) de supprimer cette observation?',\r\n      buttons: [\r\n        {\r\n          text: 'Annuler',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'OK',\r\n          handler: () => {\r\n            let data = {\"action\" : \"removeObs\", \"protoId\" :this.obsId  };\r\n            this.dismiss(data)\r\n            this.data.deleteObs(this.obsId)\r\n            this.parent.navCtrl.pop()\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }*/\r\n\r\n\r\n  onSearchInput(e){\r\n    this.searching = true;\r\n    this.setFilteredItems();\r\n    /*this.searchControl.valueChanges.debounceTime(700).subscribe(search => {\r\n      \r\n                 this.searching = false;\r\n                 this.setFilteredItems();\r\n      \r\n             });*/\r\n}\r\nonCancel(e){\r\n   // this.searching = true;\r\n}\r\ngetSelected(e){\r\n  console.log(e.target.innerText)\r\n  this.parent.formModel.value.nom_vernaculaire = e.target.innerText\r\n  this.parent.formModel.controls['nom_vernaculaire'].setValue(e.target.innerText);\r\n  this.viewCtrl.dismiss();\r\n}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-forms/protocol-form/popoverAutocompPage.ts","import { Component } from '@angular/core';\r\nimport {ProtocolFormComponent } from '../protocol-form/protocol-form';\r\nimport { Validators } from '@angular/forms';\r\nimport {Batrachofaune} from '../../../models/batrachofaune-interface';\r\n\r\n@Component({\r\n  selector: 'batrachofaune',\r\n  templateUrl: 'batrachofaune.html'\r\n})\r\nexport class BatrachofauneComponent extends ProtocolFormComponent {\r\n\r\n   ngOnInit() {\r\n      super.ngOnInit(Batrachofaune);\r\n\r\n   }\r\n  getFormModel(model){\r\n         return  this.builder.group({\r\n        'protocole':'Batracho',\r\n        'type_inventaire': [\r\n          model.type_inventaire, // default value\r\n          [Validators.required]\r\n        ],\r\n        'nom_vernaculaire': [\r\n           model.nom_vernaculaire,\r\n          [Validators.required]\r\n        ],\r\n        'effectif' : [\r\n           model.effectif,\r\n          [Validators.required]\r\n        ],\r\n        'type_milieu' : [\r\n          model.type_milieu\r\n        ],\r\n        'comportement'  : [\r\n           model.comportement\r\n        ],\r\n        'sexe': [\r\n           model.sexe\r\n        ],\r\n        'reproduction' : [\r\n           model.reproduction\r\n        ],\r\n         'latitude' : [\r\n            model.latitude\r\n          ],\r\n         'longitude' : [\r\n           model.longitude\r\n          ],\r\n         'dateObs' : [\r\n           model.dateObs\r\n          ]\r\n      });\r\n  }\r\n\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-forms/batrachofaune/batrachofaune.ts","import { Component } from '@angular/core';\r\nimport {ProtocolFormComponent } from '../protocol-form/protocol-form';\r\nimport { Validators } from '@angular/forms';\r\nimport {Herpeto} from '../../../models/herpetofaune-interface';\r\n\r\n\r\n@Component({\r\n  selector: 'herpetofaune',\r\n  templateUrl: 'herpetofaune.html',\r\n})\r\nexport class HerpetofauneComponent extends ProtocolFormComponent {\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit(Herpeto);\r\n  }\r\n  getFormModel(model){\r\n       return this.builder.group({\r\n        'protocole':'Herpeto',\r\n        'type_inventaire': [\r\n          model.type_inventaire, // default value\r\n          [Validators.required]\r\n        ],\r\n        'nom_vernaculaire': [\r\n           model.nom_vernaculaire,\r\n          [Validators.required]\r\n        ],\r\n        'effectif' : [\r\n           model.effectif,\r\n          [Validators.required]\r\n        ],\r\n        'type_milieu' : [\r\n          model.type_milieu\r\n        ],\r\n        'comportement'  : [\r\n           model.comportement\r\n        ],\r\n        'sexe': [\r\n           model.sexe\r\n        ],\r\n        'reproduction' : [\r\n           model.reproduction\r\n        ],\r\n         'latitude' : [\r\n            model.latitude\r\n          ],\r\n         'longitude' : [\r\n           model.longitude\r\n          ],\r\n         'dateObs' : [\r\n           model.dateObs\r\n          ]\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-forms/herpetofaune/herpetofaune.ts","import { Component } from '@angular/core';\r\nimport {ProtocolFormComponent } from '../protocol-form/protocol-form';\r\nimport { Validators } from '@angular/forms';\r\nimport {Mammo} from '../../../models/mammofaune-interface';\r\n\r\n\r\n@Component({\r\n  selector: 'mammofaune', \r\n  templateUrl: 'mammofaune.html',\r\n})\r\nexport class MammofauneComponent  extends ProtocolFormComponent{\r\n\r\n  ngOnInit() {\r\n    super.ngOnInit(Mammo);\r\n  }\r\n\r\n    getFormModel(model){\r\n        return this.builder.group({\r\n        'protocole':'Mammo',\r\n        'type_inventaire': [\r\n          model.type_inventaire, // default value\r\n          [Validators.required]\r\n        ],\r\n        'nom_vernaculaire': [\r\n           model.nom_vernaculaire,\r\n          [Validators.required]\r\n        ],\r\n        'effectif' : [\r\n           model.effectif,\r\n          [Validators.required]\r\n        ],\r\n        'type_milieu' : [\r\n          model.type_milieu\r\n        ],\r\n        'comportement'  : [\r\n           model.comportement\r\n        ],\r\n        'sexe': [\r\n           model.sexe\r\n        ],\r\n        'reproduction' : [\r\n           model.reproduction\r\n        ],\r\n         'latitude' : [\r\n            model.latitude\r\n          ],\r\n         'longitude' : [\r\n           model.longitude\r\n          ],\r\n         'dateObs' : [\r\n           model.dateObs\r\n          ]\r\n      });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-forms/mammofaune/mammofaune.ts","import { Injectable,HostBinding } from '@angular/core';\r\n\r\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\r\n\r\nimport { AlertController, Platform } from 'ionic-angular'\r\nimport { Network } from '@ionic-native/network';\r\nimport { Response } from '@angular/http'\r\n\r\nimport {Observable} from 'rxjs/Rx';\r\n\r\nimport 'rxjs/add/operator/filter';\r\n\r\n\r\n@Injectable()\r\nexport class NetworkService {\r\n\r\n\r\n  // public _networkType$: BehaviorSubject<any> = new BehaviorSubject(null);\r\n  private networkStatus: string;\r\n  \r\n    @HostBinding('class.error-network') get isErrorNetwork() {\r\n      return this.networkStatus == 'hasErrorNetwork'\r\n    }\r\n  constructor(\r\n    public alertCtrl: AlertController,\r\n    private platform: Platform,\r\n    private network: Network\r\n  ) {\r\n/*\r\n          //Network Listerner\r\n          this.renderer.listenGlobal('window', 'online', (evt) => {\r\n            console.log('online');\r\n            this.networkStatus = 'hasNetwork';\r\n\r\n          });\r\n          this.renderer.listenGlobal('window', 'offline', (evt) => {\r\n            console.log('offline');\r\n\r\n            this.networkStatus = 'hasErrorNetwork';\r\n          })\r\n          */\r\n  }\r\n\r\n  // get networkType$() {\r\n  //   return this._networkType$.asObservable();\r\n  // }\r\n\r\n  getNetworkStatus() {\r\n    return navigator.onLine || (this.platform.is('cordova') && this.network.type !== 'none' )\r\n  }\r\n\r\n  getNetworkType() {\r\n    if (this.platform.is('cordova')) {\r\n      return this.network.type;\r\n    } else {\r\n      return navigator.onLine ? 'online' : 'none';\r\n    }\r\n  }\r\n\r\n  handleError (error: Response | any) {\r\n    let errMsg: string;\r\n\r\n    if (error instanceof Response) {\r\n      const body = error.json() || '';\r\n      const err = body.error || JSON.stringify(body);\r\n      errMsg = `ERROR HTTP status: ${error.status} - statusText: ${error.statusText || ''} - body: ${err}`;\r\n    } else {\r\n      errMsg = error.message ? error.message : error.toString();\r\n    }\r\n\r\n    return Observable.throw(errMsg);\r\n  }\r\n\r\n  handleErrorStatus (error: Response | any) {\r\n    let errStatus: string;\r\n\r\n    if (error instanceof Response) {\r\n      errStatus = `${error.status}`;\r\n\r\n    } else {\r\n      errStatus = error.message ? error.message : error.toString();\r\n    }\r\n\r\n    return Observable.throw(errStatus);\r\n  }\r\n\r\n  manageErrorStatus(errStatus) {\r\n    let message: string;\r\n\r\n    if (errStatus === '0') {\r\n      message = 'Votre connexion Internet est désactivée.';\r\n    } else {\r\n      message = 'L\\'application a rencontré un problème.\\n Veuillez recommencer ultérieurement, merci !';\r\n    }\r\n    return message;\r\n  }\r\n\r\n  showAlertNetworkError(errStatus) {\r\n    let message = this.manageErrorStatus(errStatus);\r\n\r\n    let alert = this.alertCtrl.create({\r\n      message: message\r\n    });\r\n\r\n    alert.present();\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/network.service.ts","import { Injectable } from '@angular/core';\r\nimport { Http,RequestOptions,Headers } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport { Storage } from '@ionic/storage';\r\nimport { AlertController } from 'ionic-angular';\r\nimport {AuthService} from \"../../providers/auth\";\r\nimport _ from 'lodash';\r\n\r\n\r\n@Injectable()\r\nexport class ObsProvider {\r\n    data:any;\r\n\r\n  constructor(public http: Http, public storage : Storage,private alertCtrl: AlertController,private auth: AuthService) {\r\n\r\n  }\r\n\r\n  getObs(projId){\r\n    /*   this.storage.get('avifauneObs').then((data)=>{\r\n    //// console.log('avifaune data');\r\n    //  console.log(data)\r\n    })*/\r\n\r\n    /*if(this.data){\r\n      return Promise.resolve(this.data);\r\n    }*/\r\n    this.data = null;\r\n    return new Promise(resolve =>{\r\n      this.storage.get('observations').then((data)=>{\r\n        console.log('obs chargés');\r\n        let projData = _.filter(data, function(obs) { \r\n          return obs.projId == projId; \r\n       });\r\n\r\n\r\n        this.data = projData;\r\n        console.log(projData);\r\n        // order by date\r\n        const myOrderedArray = _.orderBy(projData, obs => obs.dateObs, ['desc'])\r\n        console.log(myOrderedArray);\r\n        resolve(myOrderedArray);\r\n      });\r\n\r\n    });\r\n  }\r\n  getObsById(id){\r\n    let obs = null;\r\n    return new Promise(resolve =>{\r\n      this.storage.get('observations').then((data)=>{\r\n        //console.log('-data from storage')\r\n        //console.log(data)\r\n        for (obs of data) {\r\n          //console.log('-- obs:')\r\n          //console.log(obs)\r\n            if(obs.id==id) {\r\n              console.log('returned obs:')\r\n              console.log(obs)\r\n              resolve(obs);\r\n            }\r\n        }    \r\n      });\r\n    });\r\n  }\r\n\r\n  saveObsById(id, value){\r\n    let obs = null;\r\n    return new Promise(resolve =>{\r\n      this.storage.get('observations').then((data)=>{\r\n        //console.log('-data from storage')\r\n        //console.log(data)\r\n        let list = [];\r\n        for (obs of data) {\r\n          //console.log('-- obs:')\r\n          //console.log(obs)\r\n            if(obs.id==id) {\r\n              obs = value;\r\n              \r\n            }\r\n            list.push(obs);\r\n        }\r\n        this.storage.set('observations', list);\r\n        resolve(1);  \r\n\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  getObsByProtocol(name:string){\r\n\r\n\r\n  }\r\n  saveObs(value){\r\n    this.storage.get('observations').then((data)=>{\r\n      if(data != null){\r\n        // some obs exisits\r\n\r\n        // update existing obs\r\n        if(value.id) {\r\n          // if obs exists remove it at update values\r\n          data.splice(_.findIndex(data, function(item) {\r\n          return item.id === value.id;\r\n        }), 1);\r\n\r\n        }\r\n        else {\r\n          // new obs, get max id + 1\r\n          let maxId =  _.maxBy(data, function(o) {\r\n          return o.id; });\r\n          if(maxId){\r\n            value.id = maxId.id + 1 ;\r\n          } else {\r\n            value.id = 1;\r\n          }\r\n          \r\n        }\r\n        data.push(value);\r\n        this.storage.set('observations', data);\r\n        console.log('****obs updated****')\r\n        console.log(data)\r\n\r\n      } else {\r\n        // storage is empty\r\n        let array = [];\r\n        value.id = 1;\r\n        array.push(value);\r\n        this.storage.set('observations', array);\r\n      }\r\n    });\r\n\r\n  }\r\n  deleteObs(id){\r\n    return new Promise(resolve =>{\r\n    this.storage.get('observations').then((data)=>{\r\n      if(data != null){\r\n        if(id) {\r\n          data.splice(_.findIndex(data, function(item) {\r\n          return item.id === id;\r\n        }), 1);\r\n        }\r\n        this.storage.set('observations', data).then((data) => {\r\n            resolve(1);\r\n        })\r\n      }\r\n    });\r\n  })\r\n\r\n  }\r\n  deleteObsByProjIdList(list){\r\n    return new Promise(resolve =>{\r\n      this.storage.get('observations').then((data)=>{\r\n        if(data != null){\r\n          for(let i=0;i<list.length;i++) {\r\n            for(let j=0;j<data.length;j++){\r\n              if(data[j]['projId']== list[i]){\r\n                data.splice(j, 1);\r\n                j--;\r\n              }\r\n            }\r\n          }\r\n          this.storage.set('observations', data).then((data) => {\r\n              resolve(1);\r\n          })\r\n        } else {\r\n          resolve(1);\r\n        }\r\n      })\r\n\r\n    })\r\n\r\n\r\n  }\r\n  getLastObsId(data){\r\n   let max =  _.maxBy(data, function(o) {\r\n     console.log('--------calcul max---------')  \r\n    return o.id; });\r\n    console.log(max.id)\r\n    return max.id || 0 ;\r\n  }\r\n  pushObs(obs){\r\n\r\n\r\n\r\n    return new Promise((resolve,reject) => {\r\n      var jsonData = JSON.stringify(obs);\r\n\r\n      var contentHeader = new Headers();\r\n      contentHeader.append('Content-Type', 'application/json');\r\n      //contentHeader.append('Cookie', 'ecoReleve-Core='+this.auth.AuthToken);\r\n      let options = new RequestOptions({ headers: contentHeader,  withCredentials: true });\r\n      \r\n      this.http.post('http://vps471185.ovh.net/ecoReleve-Core/protocols', jsonData, options  )\r\n      .map(res => res.json())\r\n      .subscribe(data => {\r\n      this.data = data;\r\n      resolve(this.data);\r\n      },\r\n      error => this.informAlert('Erreur d\\'envoi', error),\r\n      () => console.log(\"push obs Finished\")\r\n      );\r\n      });\r\n\r\n  }\r\n  informAlert(tite, data){\r\n    let alert = this.alertCtrl.create({\r\n      title: tite,\r\n      subTitle: data,\r\n      buttons: ['Ok']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/obs/obs.ts","import { Component } from '@angular/core';\r\nimport { NavController } from 'ionic-angular';\r\nimport {ProtocolsPage} from '../protocols/protocols';\r\nimport { ProjectsPage } from '../projects/projects';\r\nimport { LoginPage} from '../login/login';\r\n\r\n@Component({\r\n  selector: 'page-home',\r\n  templateUrl: 'home.html'\r\n})\r\nexport class HomePage {\r\n  protocolsPage : any;\r\n  projectsPage : any;\r\n  loginPage : any;\r\n\r\n  constructor(public navCtrl: NavController) {\r\n    this.protocolsPage = ProtocolsPage;\r\n    this.projectsPage = ProjectsPage ;\r\n    this.loginPage = LoginPage;\r\n  }\r\n    homePage(){\r\n      this.navCtrl.push(ProjectsPage)\r\n  }\r\n\r\n\r\n}\r\n  \n\n\n// WEBPACK FOOTER //\n// ./src/home/home.ts","import { CommonService } from './notification.service';\r\n\r\nexport class MapNotificationService extends CommonService {\r\n    \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/map.notification.service.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { FormBuilder, FormGroup,Validators } from '@angular/forms';\r\nimport { ProjectsPage } from '../projects/projects';\r\nimport {Headers, Http} from \"@angular/http\";\r\nimport {JwtHelper} from \"angular2-jwt\";\r\nimport {Storage} from \"@ionic/storage\";\r\nimport {AuthService} from \"../providers/auth\";\r\nimport 'rxjs/add/operator/map';\r\n\r\n\r\n\r\n@IonicPage({\r\n  name : 'login',\r\n  segment : 'login'\r\n})\r\n@Component({\r\n  selector: 'page-login',\r\n  templateUrl: 'login.html',\r\n})\r\nexport class LoginPage {\r\n\r\n  public formModel: FormGroup;\r\n  private LOGIN_URL = \"http://localhost:3001/sessions/create\";\r\n  private SIGNUP_URL = \"http://localhost:3001/users\";\r\n\r\n  auth: AuthService;\r\n  // When the page loads, we want the Login segment to be selected\r\n  authType: string = \"login\";\r\n  // We need to set the content type for the server\r\n  contentHeader = new Headers({\"Content-Type\": \"application/json\"});\r\n  error: string;\r\n  jwtHelper = new JwtHelper();\r\n  user: string;\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private  builder: FormBuilder,\r\n    // added to auth\r\n    private http: Http, private storage: Storage\r\n  ) {\r\n    /*this.auth = AuthService;\r\n    \r\n        storage.ready().then(() => {\r\n          storage.get('profile').then(profile => {\r\n            this.user = JSON.parse(profile);\r\n          }).catch(console.log);\r\n        });*/\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    this.formModel = this.builder.group({\r\n        'login': [\r\n          //'', // default value\r\n          //[Validators.required]\r\n        ],\r\n        'password': [\r\n          // '',\r\n          //[Validators.required]\r\n        ]\r\n    });\r\n  }\r\n\r\n  onSubmit(value) {\r\n    this.navCtrl.push(ProjectsPage)\r\n  }\r\n  // added to implement login\r\n  authenticate(credentials) {\r\n    this.authType == 'login' ? this.login(credentials) : this.signup(credentials);\r\n  }\r\n\r\n  login(credentials) {\r\n    this.http.post(this.LOGIN_URL, JSON.stringify(credentials), { headers: this.contentHeader })\r\n      .map(res => res.json())\r\n      .subscribe(\r\n        data => this.authSuccess(data.id_token),\r\n        err => this.error = err\r\n      );\r\n  }\r\n\r\n  signup(credentials) {\r\n    this.http.post(this.SIGNUP_URL, JSON.stringify(credentials), { headers: this.contentHeader })\r\n      .map(res => res.json())\r\n      .subscribe(\r\n        data => this.authSuccess(data.id_token),\r\n        err => this.error = err\r\n      );\r\n  }\r\n\r\n  logout() {\r\n    this.storage.remove('token');\r\n    this.user = null;\r\n  }\r\n\r\n  authSuccess(token) {\r\n    this.error = null;\r\n    this.storage.set('token', token);\r\n    this.user = this.jwtHelper.decodeToken(token).username;\r\n    this.storage.set('profile', this.user);\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/login/login.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, AlertController } from 'ionic-angular';\r\nimport {ProjectsServiceProvider} from '../providers/projects-service';\r\nimport {ObsProvider} from '../providers/obs/obs'\r\nimport { ObservationsPage } from '../observations/observations';\r\nimport _ from 'lodash';\r\nimport 'rxjs/add/observable/forkJoin';\r\nimport * as moment from 'moment';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-projects',\r\n  templateUrl: 'projects.html',\r\n    providers : [ProjectsServiceProvider\r\n    ]\r\n})\r\nexport class ProjectsPage {\r\n\r\n  projects : any;\r\n  loadedProjects : any;\r\n  checkproj :any;\r\n  projectsSegment: string= 'myproj';\r\n  disabled:any = 'disabled';\r\n  myProjdisabled:any = 'disabled';\r\n  syncdisabled:any = 'disabled';\r\n  displayMyProjs : boolean = false;\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, \r\n    public projectsService : ProjectsServiceProvider, private alertCtrl: AlertController,\r\n    public data : ObsProvider\r\n  ) {\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('ionViewDidLoad ProjectsPage');\r\n    this.loadProjects();\r\n    console.log(this.navCtrl)\r\n  }\r\n\r\n  loadProjects (){\r\n\r\n    /*\r\n    // projects from server\r\n    var p1 = new Promise((resolve, reject) => {\r\n      this.projectsService.load()\r\n      .then(data =>{\r\n        this.projects = data;\r\n        return Promise.resolve(1);\r\n  \r\n      })\r\n    });\r\n    // local projects\r\n    var p2 = new Promise((resolve, reject) => {\r\n      this.projectsService.getProj().then(data =>{\r\n        \r\n              this.loadedProjects = data;\r\n              if(!this.loadedProjects) {\r\n                this.projectsSegment = 'allproj';\r\n                this.displayMyProjs = false;\r\n                this.myProjdisabled = false;\r\n              } else {\r\n                this.displayMyProjs = true;\r\n              }\r\n              return Promise.resolve(1);\r\n      })\r\n    });\r\n\r\n    var source = Rx.Observable.forkJoin(\r\n      p1,\r\n      p2\r\n    );\r\n    \r\n    var subscription = source.subscribe(\r\n      function (x) {\r\n          for (let serverProj in this.projects) {\r\n            for (let localProj in this.projects) {\r\n              if(serverProj['ID'] == localProj['ID']){\r\n                serverProj['isLoaded'] = true;\r\n              }\r\n            }\r\n        }\r\n        console.log('loaded from server :');\r\n        console.log(this.projects);\r\n      },\r\n      function (err) {\r\n        console.log('Error: %s', err);\r\n      },\r\n      function () {\r\n        console.log('Completed');\r\n      });\r\n    \r\n    */\r\n    /*\r\n      this.projectsService.getProj().then(data =>{\r\n        \r\n              this.loadedProjects = data;\r\n              if(!this.loadedProjects) {\r\n                this.projectsSegment = 'allproj';\r\n                this.displayMyProjs = false;\r\n                this.myProjdisabled = false;\r\n              } else {\r\n                this.displayMyProjs = true;\r\n              }\r\n              return Promise.resolve(this.loadedProjects);\r\n      })\r\n      .then( res => {\r\n        this.projectsService.load()\r\n        .then(data =>{\r\n          this.projects = data;\r\n          return Promise.resolve(this.projects);\r\n    \r\n        })\r\n\r\n      })\r\n      .then(res => {\r\n        console.log('je suis à la fin');\r\n        for(let i=0; i<this.projects.length;i++) {\r\n\r\n            for(let j=0; j<this.loadedProjects.length;j++) {\r\n              if(this.loadedProjects[j]['ID'] == this.projects[i]['ID']){\r\n                this.projects[i]['isLoaded'] = true;\r\n              }\r\n            }\r\n\r\n\r\n        }\r\n        \r\n        \r\n       /* for (let serverProj in this.projects) {\r\n          for (let localProj in this.projects) {\r\n            if(serverProj['ID'] == localProj['ID']){\r\n              serverProj['isLoaded'] = true;\r\n            }\r\n          }\r\n        }\r\n      console.log('loaded from server :');\r\n      console.log(this.projects);\r\n\r\n\r\n\r\n      });\r\n\r\n    */\r\n\r\n        let p1= new Promise((resolve, reject) => {\r\n          this.projectsService.getProj().then(data =>{\r\n            \r\n                  this.loadedProjects = data;\r\n                  if(!this.loadedProjects) {\r\n                    this.projectsSegment = 'allproj';\r\n                    this.displayMyProjs = false;\r\n                    this.myProjdisabled = false;\r\n                    this.syncdisabled = false;\r\n                  } else {\r\n                    this.displayMyProjs = true;\r\n                  }\r\n                  resolve(this.loadedProjects);\r\n          })\r\n        })\r\n          \r\n      let p2= new Promise((resolve, reject) => {\r\n            this.projectsService.load()\r\n            .then(data =>{\r\n              this.projects = data;\r\n              resolve(this.projects);\r\n        \r\n            })\r\n      })\r\n\r\n\r\n      Promise.all([p1,p2]).then(value => {\r\n        console.log(value);\r\n        \r\n        for (let serverProj in this.projects) {\r\n          for (let localProj in this.loadedProjects) {\r\n            if(this.projects[serverProj]['ID'] == this.loadedProjects[localProj]['ID']){\r\n              this.projects[serverProj]['isLoaded'] = true;\r\n            }\r\n          }\r\n        }\r\n        console.log('loaded from server :');\r\n        console.log(this.projects);\r\n\r\n      });\r\n\r\n  }\r\n    navToProtocols(id){\r\n    // get selected protocol\r\n    //let pro = this.protocols.find(x => x.id === id);\r\n      this.navCtrl.push(ObservationsPage, {projId : id});\r\n  }\r\n  onSegmentChanged($event){\r\n    if (($event._value == 'myproj')) {\r\n      this.displayMyProjs = true;\r\n      this.myProjdisabled = 'disabled';\r\n      this.syncdisabled = 'disabled';\r\n    } else {\r\n      this.displayMyProjs = false;\r\n      if(!this.projects) {\r\n        // no data from server, try to recoonect, else display alert\r\n        this.reloadDataFromServer();\r\n      }\r\n    }\r\n    \r\n  }\r\n  reloadDataFromServer(){\r\n    this.projectsService.load()\r\n    .then(data =>{\r\n        this.projects = data;\r\n        if (!data){\r\n          // no data, alert\r\n          let alert = this.alertCtrl.create({\r\n            title: 'Erreur de récupération de projet(s)',\r\n            message: 'Le téléchargement de projets a échoué. Merci de vérifier votre connexion internet et/ou de contacter l\\'administrateur.',\r\n            buttons: [\r\n              {\r\n                text: 'OK'\r\n              }\r\n            ]\r\n          });\r\n          alert.present();\r\n        }\r\n    })\r\n\r\n  }\r\n  checkedDone(proj, type) {\r\n    let projects =this.projects ;\r\n    if(type==\"local\") {\r\n      projects = this.loadedProjects ;\r\n    }  \r\n    if(proj.checked){\r\n      this.disabled = false;\r\n      this.myProjdisabled = false;\r\n      this.syncdisabled = false;\r\n    } else {\r\n      this.disabled = \"disabled\";\r\n      this.myProjdisabled = \"disabled\";\r\n      this.syncdisabled =\"disabled\";\r\n\r\n      for (let proj of projects) {\r\n        if(proj.checked) {\r\n          this.disabled = false;\r\n          this.myProjdisabled = false;\r\n          this.syncdisabled =false;\r\n        }\r\n      }\r\n    }\r\n    console.log(projects);\r\n  }\r\n\r\n  ImportProjects(){\r\n    // load checked projects\r\n    // 1- for each checked project load geometry\r\n    let nbToload = 0;\r\n    let loaded = 0 ;\r\n    for (let proj of this.projects) {\r\n      if(proj.checked) {\r\n        nbToload+=1;\r\n      }\r\n    }\r\n    let list = [];\r\n    for (let proj of this.projects) {\r\n      if(proj.checked) {\r\n        let id = proj.ID;\r\n        proj.image = \"./assets/icones_projects/pas_synchro.png\";\r\n        this.projectsService.loadGeometry(id).then(data =>{\r\n          if(data){\r\n            proj.geometry = data;\r\n          } else {\r\n            proj.geometry = null;\r\n          }\r\n          proj['isLoaded'] = true;\r\n          //proj.checked = false;\r\n          list.push(proj);\r\n          loaded+=1;\r\n          if(loaded == nbToload) {\r\n            // update loaded projects list\r\n\r\n            if(this.loadedProjects){\r\n              let tab  = _.concat(this.loadedProjects, list);\r\n              this.loadedProjects = tab;\r\n              this.projectsService.update(tab);\r\n\r\n            } else {\r\n              this.loadedProjects =list;\r\n              this.projectsService.update(list);\r\n            }\r\n            \r\n            \r\n            //this.loadedProjects = list;\r\n             // disable selected projects list ( for loaded projects)\r\n            this.disableChecked(this.loadedProjects);\r\n            //this.projectsService.update(this.loadedProjects);\r\n            //this.refreshTabs(list);\r\n            this.displayAlert(loaded);\r\n          }\r\n          /*this.projectsService.saveProject(proj).then(data =>{\r\n            loaded+=1;\r\n            if(loaded == nbToload) {\r\n              this.displayAlert(loaded);\r\n              this.refreshTabs();\r\n            }\r\n          });*/\r\n        })\r\n      }\r\n    }\r\n  }\r\n  disableChecked(list){\r\n    for (let proj of list) {\r\n      proj.checked = false;\r\n    }\r\n  }\r\n /* refreshTabs(data) {\r\n        // local projects\r\n        this.projectsService.getProj().then(data =>{\r\n          this.loadedProjects = data;\r\n          console.log('*** loaded ****')\r\n          console.log(this.loadedProjects)\r\n        })\r\n  }*/\r\n  displayAlert(loaded){\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Téléchargement de projet(s)',\r\n      message: 'Téléchargement ou mise à jour de ' + loaded + ' projet(s) ' + ' réussi. ',\r\n      buttons: [\r\n        {\r\n          text: 'OK'\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n  }\r\n  deleteSelected(){\r\n\r\n    let  alert = this.alertCtrl.create({\r\n      title: 'Suppression de projet(s)',\r\n      message: 'Etes vous sur(e) de supprimer le(s) projet(s) sélectionné(s)?',\r\n      buttons: [\r\n        {\r\n          text: 'Annuler',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Oui',\r\n          handler: () => {\r\n             //supprimer proj en local, mettre à jour liste et update local storage\r\n            let listProj = [];\r\n            let listObs = [];\r\n            let promises = [];\r\n            for (let proj of this.loadedProjects) {\r\n              if(proj.checked) {\r\n                listProj.push(proj.ID)  \r\n              }\r\n            }\r\n            promises.push(this.data.deleteObsByProjIdList(listProj));\r\n            \r\n\r\n            \r\n            // fin de suppression\r\n            Promise.all(promises).then(value => {\r\n              \r\n              for(let i=0;i<listProj.length;i++){\r\n                  _.remove(this.loadedProjects, function(prj) {\r\n                    return prj.ID == listProj[i];\r\n                 });\r\n\r\n              }\r\n              // persistance\r\n            this.projectsService.update(this.loadedProjects);\r\n            this.myProjdisabled = 'disabled';\r\n            this.syncdisabled = 'disabled';\r\n              \r\n              this.informAlert('Suppression de données', 'Le(s) projet(s) sélectionnées et leurs donnée(s) associée(s) ont bien été supprimé(s) avec succès.')\r\n\r\n            })\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n\r\n  }\r\n  pushData(event){\r\n    let  alert = this.alertCtrl.create({\r\n      title: 'Synchronisation de données',\r\n      message: 'Etes vous sur(e) de vouloir synchroniser les données pour le(s) projet(s) sélectionné(s)?',\r\n      buttons: [\r\n        {\r\n          text: 'Annuler',\r\n          role: 'cancel',\r\n          handler: () => {\r\n            console.log('Cancel clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Oui',\r\n          handler: () => {\r\n             //supprimer proj en local, mettre à jour liste et update local storage\r\n            let list = [];\r\n            for (let proj of this.loadedProjects) {\r\n              if(proj.checked) {\r\n               list.push(proj.ID)  \r\n              }\r\n            }\r\n            /*for(let i=0;i<list.length;i++){\r\n              _.remove(this.loadedProjects, function(prj) {\r\n                  return prj.ID == list[i];\r\n              });\r\n            }*/\r\n            for(let projID of list ){\r\n              // promises for all selected  projects\r\n              let projPromises = [];\r\n              // for each id proj load data\r\n              this.data.getObs(projID).then((obs)=> {\r\n                // set label to display for each obs\r\n                \r\n                let promises = [];\r\n\r\n                for (let dt in obs) {\r\n                      if(! obs[dt]['serverId']){\r\n                      let observation = obs[dt];\r\n                      observation['station'] = {}\r\n\r\n                    observation['station']['LAT'] = parseFloat(obs[dt]['latitude']);\r\n                    observation['station']['LON'] = parseFloat(obs[dt]['longitude']);\r\n                    observation['station']['FK_Project'] = obs[dt]['projId'];\r\n                    observation['type_name'] = obs[dt]['protocole'];\r\n                    let dateObs =  obs[dt]['dateObs'];\r\n                    var obsdate = moment(dateObs);\r\n                    var day = obsdate.date();\r\n                    var month = obsdate.month (); \r\n                    var year = obsdate.year();\r\n                    observation['station']['StationDate'] =  day + \"/\"+ (month+1) + \"/\"  + year;\r\n                    observation['station']['Name'] = 'test';\r\n\r\n                    let p= new Promise((resolve, reject) => {\r\n                      this.data.pushObs(observation).then(data =>{\r\n                        console.log('*** id serveur obs :');\r\n                        console.log(data);\r\n                          obs[dt]['serverId']= data['id']; \r\n                          obs[dt]['pushed']= true; \r\n                          console.log(obs);\r\n                          this.data.saveObsById(obs[dt]['id'],obs[dt]);\r\n                            resolve(data['id']);\r\n                        })\r\n                      })\r\n                      promises.push(p);\r\n                      projPromises.push(p);\r\n\r\n                    }\r\n                }\r\n\r\n                Promise.all(promises).then(value => {\r\n                  console.log('promises');\r\n                  console.log(value);\r\n                  let projName ;\r\n                  for(let j=0; j<this.loadedProjects.length;j++) {\r\n                    if(this.loadedProjects[j]['ID'] == projID){\r\n                      this.projects[j]['isLoaded'] = true;\r\n                      projName = this.projects[j]['Name'];\r\n                      this.projects[j]['image'] = \"./assets/icones_projects/synchro.png\";\r\n                    }\r\n                  }\r\n                  // persistance, MAJ\r\n                  this.projectsService.update(this.loadedProjects);\r\n                  if(value.length){\r\n                    this.informAlert('Envoi de données', 'Le(s)' + value.length + ' observations du projet  \"' + projName + '\" ont été envoyées avec succès.')\r\n                  } else {\r\n                    this.informAlert('Envoi de données', 'Pas d\\' observations à envoyer pour le projet  \"' + projName + '\".')\r\n                  }\r\n                })\r\n\r\n               })\r\n\r\n               Promise.all(projPromises).then(value => {\r\n                this.syncdisabled = 'disabled';\r\n                //this.informAlert('Envoi de données', 'fin de synchronisation avec succès.')\r\n\r\n              })   \r\n\r\n\r\n            }\r\n\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    alert.present();\r\n    \r\n  }\r\n  informAlert(tite, data){\r\n    let alert = this.alertCtrl.create({\r\n      title: tite,\r\n      subTitle: data,\r\n      buttons: ['Ok']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  deleteObs(id){\r\n    return new Promise(resolve =>{\r\n      this.data.deleteObs(id).then((data)=>{\r\n        resolve(1);  \r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/projects/projects.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app.module';\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule);\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\r\nimport { ErrorHandler, NgModule } from '@angular/core';\r\nimport { IonicApp, IonicErrorHandler, IonicModule } from 'ionic-angular';\r\nimport {HttpModule} from '@angular/http';\r\nimport { IonicStorageModule  } from '@ionic/storage';\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\n\r\nimport { MyApp } from './app.component';\r\nimport { HomePage } from '../home/home';\r\nimport { ProtocolsPage } from '../protocols/protocols';\r\nimport { ProjectsPage } from '../projects/projects';\r\nimport { ObservationPage} from '../observation/observation';\r\nimport { ObservationsPage } from '../observations/observations';\r\n//import { LoginPage} from '../login/login';\r\n//import { LoginPage2} from '../login2/login2';\r\n\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { ProtocolsServiceProvider } from '../providers/protocols-service';\r\nimport { Network } from '@ionic-native/network';\r\nimport { NetworkService } from '../shared/network.service';\r\nimport { PostsDataProvider } from '../providers/posts-data/posts-data';\r\nimport { ObsProvider } from '../providers/obs/obs';\r\nimport {AuthService} from \"../providers/auth\";;\r\nimport { CommonService } from '../shared/notification.service';\r\nimport {GeoService} from '../shared/geolocation.notification.service';\r\nimport { MapNotificationService } from '../shared/map.notification.service'; \r\nimport { ProtocolFormComponent } from '../components/protocol-form/protocol-form';\r\nimport { BatrachofauneComponent } from '../observation/proto-forms//batrachofaune/batrachofaune';\r\nimport { AvifauneComponent } from '../observation/proto-forms/avifaune/avifaune';  \r\nimport { MammofauneComponent } from '../observation/proto-forms//mammofaune/mammofaune';\r\nimport { HerpetofauneComponent } from '../observation/proto-forms/herpetofaune/herpetofaune';  \r\n\r\nimport {PopoverPage} from'../observation/popoverPage';\r\nimport {PopoverAutocompPage} from'../observation/proto-forms/protocol-form/popoverAutocompPage'\r\n\r\nimport {  MapComponent} from '../components/map/map'; \r\nimport { AdDirective }    from '../shared/ad.directive';\r\nimport { AdFormService} from '../observation/proto-form-provider'\r\nimport { LoginPage2 } from '../login2/login2';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyApp,\r\n    HomePage,\r\n    ProtocolsPage,\r\n    ProjectsPage,\r\n    ObservationPage,\r\n    ObservationsPage,\r\n    //LoginPage,\r\n    LoginPage2,\r\n    ProtocolFormComponent,\r\n    BatrachofauneComponent,\r\n    AvifauneComponent,\r\n    MammofauneComponent,\r\n    HerpetofauneComponent,\r\n    MapComponent,\r\n    PopoverPage,\r\n    PopoverAutocompPage,\r\n    AdDirective\r\n  ],\r\n  imports: [\r\n    HttpModule,\r\n\r\n    BrowserModule,\r\n    IonicModule.forRoot(MyApp),\r\n    IonicStorageModule .forRoot()\r\n  ],\r\n  bootstrap: [IonicApp],\r\n  entryComponents: [\r\n    MyApp,\r\n    HomePage,\r\n    ProtocolsPage,\r\n    ProjectsPage,\r\n    ObservationPage,\r\n    ObservationsPage,\r\n    //LoginPage,\r\n    LoginPage2,\r\n    MapComponent,\r\n    PopoverPage,\r\n    PopoverAutocompPage,\r\n    AvifauneComponent,\r\n    HerpetofauneComponent,\r\n    MammofauneComponent,\r\n    BatrachofauneComponent\r\n    \r\n\r\n  ],\r\n  providers: [\r\n    StatusBar,\r\n    SplashScreen,\r\n    {provide: ErrorHandler, useClass: IonicErrorHandler},\r\n    ProtocolsServiceProvider,\r\n    Network,\r\n    NetworkService,\r\n    Geolocation,\r\n    PostsDataProvider,\r\n    ObsProvider,\r\n    CommonService,\r\n    MapNotificationService,\r\n    GeoService,\r\n    AdDirective,\r\n    AdFormService,\r\n    AuthService\r\n  ]\r\n})\r\nexport class AppModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","//import {AutoCompleteService} from 'ionic2-auto-complete';\r\nimport { Http } from '@angular/http';\r\nimport {Injectable} from \"@angular/core\";\r\nimport 'rxjs/add/operator/map'\r\n\r\n@Injectable()\r\nexport class CompleteTaxaService {\r\n  //labelAttribute = \"name\";\r\n  items: any;\r\n  protocole : any;\r\n  constructor(private http:Http) {\r\n    this.items = [\r\n      {title: 'one'},\r\n      {title: 'two'},\r\n      {title: 'three'},\r\n      {title: 'four'},\r\n      {title: 'five'},\r\n      {title: 'six'}\r\n  ]\r\n  }\r\n  getResults(item:string, protocole) {\r\n   /* return this.items.filter((item) => {\r\n      return item.title.indexOf(item) > -1;\r\n  }); */\r\n    \r\n    //return this.http.get(\"https://restcountries.eu/rest/v1/name/\"+item)\r\n    /*return this.http.get(\"http://vps471185.ovh.net/ecoReleve-Core/autocomplete/taxon?protocol=insecte&type=vernaculaire&term=\"+item)\r\n      .map(\r\n        result =>\r\n        {\r\n          return result.json()\r\n            .filter(item => item.vernaculaire.toLowerCase().startsWith(item.toLowerCase()) )\r\n        });*/\r\n        let proto ;\r\n        switch(protocole) {\r\n          case 'avifaune':\r\n          proto = 'oiseau'\r\n              break;\r\n          case 'batrachofaune':\r\n          proto = 'amphibien'\r\n              break;\r\n          case 'herpetofaune':\r\n          proto = 'reptile'\r\n                  break;\r\n          case 'mammofaune':\r\n            proto = 'mammal'\r\n            break;\r\n          default:\r\n                 'avifaune'\r\n      }\r\n      /*  valeurs de proto :\r\n      reptile\r\n      oiseau\r\n      amphibien\r\n      mammal\r\n      insecte\r\n      chiroptera  */\r\n\r\n          return new Promise((resolve , reject) =>{\r\n            //this.http.get('assets/data/projects.json')\r\n            this.http.get(\"http://vps471185.ovh.net/ecoReleve-Core/autocomplete/taxon?type=vernaculaire&term=\"+item + \"&protocol=\" + proto)\r\n            .map(res => res.json())\r\n            .subscribe(data => {\r\n              console.log('****data from ovh********');\r\n              \r\n              resolve(data);\r\n            },\r\n            err => {\r\n                //reject(err);\r\n                resolve([]);\r\n            });\r\n      \r\n          });\r\n      }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/autocomplete-service.ts","interface AvifauneInterface {\r\n    id : number,\r\n    protocole : string,\r\n    type_inventaire: string,\r\n    nom_vernaculaire: string,\r\n    effectif: number,\r\n    type_milieu: string,\r\n    comportement: string,\r\n    sexe: string,\r\n    code_atlas: string,\r\n    hauteur_vol: string,\r\n    latitude:number,\r\n    longitude: number,\r\n    dateObs: number,\r\n    projId : number\r\n}\r\nexport   class Avifaune implements AvifauneInterface {  \r\n        constructor(\r\n          public id: number, \r\n          public protocole ='',\r\n          public type_inventaire ='',\r\n          public nom_vernaculaire ='',\r\n          public effectif=null,\r\n          public type_milieu ='',\r\n          public comportement ='',\r\n          public sexe ='',\r\n          public code_atlas ='',\r\n          public hauteur_vol ='',\r\n          public latitude= 0,\r\n          public longitude=0,\r\n          public dateObs =0,\r\n          public projId\r\n        ) {\r\n        } \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/avifaune-interface.ts","interface BatrachofauneInterface {\r\n    id : number,\r\n    protocole : string,\r\n    type_inventaire: string,\r\n    nom_vernaculaire: string,\r\n    effectif: number,\r\n    type_milieu: string,\r\n    comportement: string,\r\n    sexe: string,\r\n    reproduction : string,\r\n    latitude:number,\r\n    longitude: number,\r\n    dateObs: number\r\n}\r\nexport   class Batrachofaune implements BatrachofauneInterface {  \r\n        constructor(\r\n          public id: number, \r\n          public protocole ='',\r\n          public type_inventaire ='',\r\n          public nom_vernaculaire ='',\r\n          public effectif=null,\r\n          public type_milieu ='',\r\n          public comportement ='',\r\n          public sexe ='',\r\n          public reproduction ='',\r\n          public latitude= 0,\r\n          public longitude=0,\r\n          public dateObs =0\r\n        ) {\r\n        } \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/batrachofaune-interface.ts","interface HerpetoInterface {\r\n    id : number,\r\n    protocole : string,\r\n    type_inventaire: string,\r\n    nom_vernaculaire: string,\r\n    effectif: number,\r\n    type_milieu: string,\r\n    comportement: string,\r\n    sexe: string,\r\n    reproduction: string,\r\n    latitude:number,\r\n    longitude: number,\r\n    dateObs: number\r\n}\r\nexport   class Herpeto implements HerpetoInterface {  \r\n    constructor(\r\n        public id: number, \r\n        public protocole ='',\r\n        public type_inventaire ='',\r\n        public nom_vernaculaire ='',\r\n        public effectif=null,\r\n        public type_milieu ='',\r\n        public comportement ='',\r\n        public sexe ='',\r\n        public reproduction ='',\r\n        public latitude= 0,\r\n        public longitude=0,\r\n        public dateObs =0\r\n    ) {\r\n    } \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/herpetofaune-interface.ts","interface MammoInterface {\r\n    id : number,\r\n    protocole : string,\r\n    type_inventaire: string,\r\n    nom_vernaculaire: string,\r\n    effectif: number,\r\n    type_milieu: string,\r\n    comportement: string,\r\n    sexe: string,\r\n    reproduction: string,\r\n    latitude:number,\r\n    longitude: number,\r\n    dateObs: number\r\n}\r\nexport   class Mammo implements MammoInterface {  \r\n    constructor(\r\n        public id: number, \r\n        public protocole ='',\r\n        public type_inventaire ='',\r\n        public nom_vernaculaire ='',\r\n        public effectif=null,\r\n        public type_milieu ='',\r\n        public comportement ='',\r\n        public sexe ='',\r\n        public reproduction ='',\r\n        public latitude= 0,\r\n        public longitude=0,\r\n        public dateObs =0\r\n    ) {\r\n    } \r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/models/mammofaune-interface.ts","var map = {\n\t\"./af\": 244,\n\t\"./af.js\": 244,\n\t\"./ar\": 245,\n\t\"./ar-dz\": 246,\n\t\"./ar-dz.js\": 246,\n\t\"./ar-kw\": 247,\n\t\"./ar-kw.js\": 247,\n\t\"./ar-ly\": 248,\n\t\"./ar-ly.js\": 248,\n\t\"./ar-ma\": 249,\n\t\"./ar-ma.js\": 249,\n\t\"./ar-sa\": 250,\n\t\"./ar-sa.js\": 250,\n\t\"./ar-tn\": 251,\n\t\"./ar-tn.js\": 251,\n\t\"./ar.js\": 245,\n\t\"./az\": 252,\n\t\"./az.js\": 252,\n\t\"./be\": 253,\n\t\"./be.js\": 253,\n\t\"./bg\": 254,\n\t\"./bg.js\": 254,\n\t\"./bm\": 255,\n\t\"./bm.js\": 255,\n\t\"./bn\": 256,\n\t\"./bn.js\": 256,\n\t\"./bo\": 257,\n\t\"./bo.js\": 257,\n\t\"./br\": 258,\n\t\"./br.js\": 258,\n\t\"./bs\": 259,\n\t\"./bs.js\": 259,\n\t\"./ca\": 260,\n\t\"./ca.js\": 260,\n\t\"./cs\": 261,\n\t\"./cs.js\": 261,\n\t\"./cv\": 262,\n\t\"./cv.js\": 262,\n\t\"./cy\": 263,\n\t\"./cy.js\": 263,\n\t\"./da\": 264,\n\t\"./da.js\": 264,\n\t\"./de\": 265,\n\t\"./de-at\": 266,\n\t\"./de-at.js\": 266,\n\t\"./de-ch\": 267,\n\t\"./de-ch.js\": 267,\n\t\"./de.js\": 265,\n\t\"./dv\": 268,\n\t\"./dv.js\": 268,\n\t\"./el\": 269,\n\t\"./el.js\": 269,\n\t\"./en-au\": 270,\n\t\"./en-au.js\": 270,\n\t\"./en-ca\": 271,\n\t\"./en-ca.js\": 271,\n\t\"./en-gb\": 272,\n\t\"./en-gb.js\": 272,\n\t\"./en-ie\": 273,\n\t\"./en-ie.js\": 273,\n\t\"./en-nz\": 274,\n\t\"./en-nz.js\": 274,\n\t\"./eo\": 275,\n\t\"./eo.js\": 275,\n\t\"./es\": 276,\n\t\"./es-do\": 277,\n\t\"./es-do.js\": 277,\n\t\"./es-us\": 278,\n\t\"./es-us.js\": 278,\n\t\"./es.js\": 276,\n\t\"./et\": 279,\n\t\"./et.js\": 279,\n\t\"./eu\": 280,\n\t\"./eu.js\": 280,\n\t\"./fa\": 281,\n\t\"./fa.js\": 281,\n\t\"./fi\": 282,\n\t\"./fi.js\": 282,\n\t\"./fo\": 283,\n\t\"./fo.js\": 283,\n\t\"./fr\": 284,\n\t\"./fr-ca\": 285,\n\t\"./fr-ca.js\": 285,\n\t\"./fr-ch\": 286,\n\t\"./fr-ch.js\": 286,\n\t\"./fr.js\": 284,\n\t\"./fy\": 287,\n\t\"./fy.js\": 287,\n\t\"./gd\": 288,\n\t\"./gd.js\": 288,\n\t\"./gl\": 289,\n\t\"./gl.js\": 289,\n\t\"./gom-latn\": 290,\n\t\"./gom-latn.js\": 290,\n\t\"./gu\": 291,\n\t\"./gu.js\": 291,\n\t\"./he\": 292,\n\t\"./he.js\": 292,\n\t\"./hi\": 293,\n\t\"./hi.js\": 293,\n\t\"./hr\": 294,\n\t\"./hr.js\": 294,\n\t\"./hu\": 295,\n\t\"./hu.js\": 295,\n\t\"./hy-am\": 296,\n\t\"./hy-am.js\": 296,\n\t\"./id\": 297,\n\t\"./id.js\": 297,\n\t\"./is\": 298,\n\t\"./is.js\": 298,\n\t\"./it\": 299,\n\t\"./it.js\": 299,\n\t\"./ja\": 300,\n\t\"./ja.js\": 300,\n\t\"./jv\": 301,\n\t\"./jv.js\": 301,\n\t\"./ka\": 302,\n\t\"./ka.js\": 302,\n\t\"./kk\": 303,\n\t\"./kk.js\": 303,\n\t\"./km\": 304,\n\t\"./km.js\": 304,\n\t\"./kn\": 305,\n\t\"./kn.js\": 305,\n\t\"./ko\": 306,\n\t\"./ko.js\": 306,\n\t\"./ky\": 307,\n\t\"./ky.js\": 307,\n\t\"./lb\": 308,\n\t\"./lb.js\": 308,\n\t\"./lo\": 309,\n\t\"./lo.js\": 309,\n\t\"./lt\": 310,\n\t\"./lt.js\": 310,\n\t\"./lv\": 311,\n\t\"./lv.js\": 311,\n\t\"./me\": 312,\n\t\"./me.js\": 312,\n\t\"./mi\": 313,\n\t\"./mi.js\": 313,\n\t\"./mk\": 314,\n\t\"./mk.js\": 314,\n\t\"./ml\": 315,\n\t\"./ml.js\": 315,\n\t\"./mr\": 316,\n\t\"./mr.js\": 316,\n\t\"./ms\": 317,\n\t\"./ms-my\": 318,\n\t\"./ms-my.js\": 318,\n\t\"./ms.js\": 317,\n\t\"./my\": 319,\n\t\"./my.js\": 319,\n\t\"./nb\": 320,\n\t\"./nb.js\": 320,\n\t\"./ne\": 321,\n\t\"./ne.js\": 321,\n\t\"./nl\": 322,\n\t\"./nl-be\": 323,\n\t\"./nl-be.js\": 323,\n\t\"./nl.js\": 322,\n\t\"./nn\": 324,\n\t\"./nn.js\": 324,\n\t\"./pa-in\": 325,\n\t\"./pa-in.js\": 325,\n\t\"./pl\": 326,\n\t\"./pl.js\": 326,\n\t\"./pt\": 327,\n\t\"./pt-br\": 328,\n\t\"./pt-br.js\": 328,\n\t\"./pt.js\": 327,\n\t\"./ro\": 329,\n\t\"./ro.js\": 329,\n\t\"./ru\": 330,\n\t\"./ru.js\": 330,\n\t\"./sd\": 331,\n\t\"./sd.js\": 331,\n\t\"./se\": 332,\n\t\"./se.js\": 332,\n\t\"./si\": 333,\n\t\"./si.js\": 333,\n\t\"./sk\": 334,\n\t\"./sk.js\": 334,\n\t\"./sl\": 335,\n\t\"./sl.js\": 335,\n\t\"./sq\": 336,\n\t\"./sq.js\": 336,\n\t\"./sr\": 337,\n\t\"./sr-cyrl\": 338,\n\t\"./sr-cyrl.js\": 338,\n\t\"./sr.js\": 337,\n\t\"./ss\": 339,\n\t\"./ss.js\": 339,\n\t\"./sv\": 340,\n\t\"./sv.js\": 340,\n\t\"./sw\": 341,\n\t\"./sw.js\": 341,\n\t\"./ta\": 342,\n\t\"./ta.js\": 342,\n\t\"./te\": 343,\n\t\"./te.js\": 343,\n\t\"./tet\": 344,\n\t\"./tet.js\": 344,\n\t\"./th\": 345,\n\t\"./th.js\": 345,\n\t\"./tl-ph\": 346,\n\t\"./tl-ph.js\": 346,\n\t\"./tlh\": 347,\n\t\"./tlh.js\": 347,\n\t\"./tr\": 348,\n\t\"./tr.js\": 348,\n\t\"./tzl\": 349,\n\t\"./tzl.js\": 349,\n\t\"./tzm\": 350,\n\t\"./tzm-latn\": 351,\n\t\"./tzm-latn.js\": 351,\n\t\"./tzm.js\": 350,\n\t\"./uk\": 352,\n\t\"./uk.js\": 352,\n\t\"./ur\": 353,\n\t\"./ur.js\": 353,\n\t\"./uz\": 354,\n\t\"./uz-latn\": 355,\n\t\"./uz-latn.js\": 355,\n\t\"./uz.js\": 354,\n\t\"./vi\": 356,\n\t\"./vi.js\": 356,\n\t\"./x-pseudo\": 357,\n\t\"./x-pseudo.js\": 357,\n\t\"./yo\": 358,\n\t\"./yo.js\": 358,\n\t\"./zh-cn\": 359,\n\t\"./zh-cn.js\": 359,\n\t\"./zh-hk\": 360,\n\t\"./zh-hk.js\": 360,\n\t\"./zh-tw\": 361,\n\t\"./zh-tw.js\": 361\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 547;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/moment/locale ^\\.\\/.*$\n// module id = 547\n// module chunks = 6","import { Component, ViewChild, HostBinding,Renderer } from '@angular/core';\r\nimport { Nav, Platform } from 'ionic-angular';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\nimport { SplashScreen } from '@ionic-native/splash-screen';\r\nimport { Network } from '@ionic-native/network';\r\nimport { NetworkService } from '../shared/network.service';\r\nimport { Storage } from '@ionic/storage';\r\n\r\nimport { HomePage } from '../home/home';\r\n//import { PostsPage } from '../pages/posts/posts';\r\n//import { ProtocolsPage } from '../pages/protocols/protocols';\r\nimport { ProjectsPage } from '../projects/projects';\r\n//import { LoginPage} from '../login/login';\r\nimport { LoginPage2} from '../login2/login2';\r\nimport {AuthService} from \"../providers/auth\";\r\n@Component({\r\n  templateUrl: 'app.html'\r\n})\r\nexport class MyApp {\r\n  @ViewChild(Nav) nav: Nav;\r\n  private networkStatus: string;\r\n\r\n  @HostBinding('class.error-network') get isErrorNetwork() {\r\n    return this.networkStatus == 'hasErrorNetwork'\r\n  }\r\n\r\n  rootPage: any;\r\n\r\n  pages: Array<{title: string, component: any}>;\r\n\r\n  constructor(public platform: Platform, \r\n              public statusBar: StatusBar, \r\n              public splashScreen: SplashScreen, \r\n              private network: Network, \r\n              private renderer: Renderer,\r\n              private networkService: NetworkService,\r\n              public storage: Storage,\r\n              private auth: AuthService\r\n              ) {\r\n    this.initializeApp();\r\n\r\n    // used for an example of ngFor and navigation\r\n    this.pages = [\r\n      { title: 'Home', component: HomePage },\r\n      //{ title: 'Protocoles', component: ProtocolsPage },\r\n      { title: 'Projets', component: ProjectsPage},\r\n      //{ title: 'Observation', component: ObservationPage}\r\n    ];\r\n\r\n  }\r\n\r\n  initializeApp() {\r\n    this.platform.ready().then(() => {\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n      this.statusBar.styleDefault();\r\n      this.splashScreen.hide();\r\n      this.initialize()\r\n        .then(() => {\r\n          this.navigateTostartPage()\r\n\r\n        }, (err) => {\r\n          console.log(err);\r\n          setTimeout(() => {\r\n            //splashScreen.hide();\r\n          },100);\r\n          \r\n          this.navigateTostartPage()\r\n          //this.rootPage = ProjectsPage;\r\n        })\r\n\r\n      /*//Network Listerner\r\n      this.renderer.listenGlobal('window', 'online', (evt) => {\r\n        console.log('online');\r\n        this.networkStatus = 'hasNetwork';\r\n      });\r\n      this.renderer.listenGlobal('window', 'offline', (evt) => {\r\n        console.log('offline');\r\n        this.networkStatus = 'hasErrorNetwork';\r\n      })*/\r\n\r\n      // Okay, so the platform is ready and our plugins are available.\r\n      // Here you can do any higher level native things you might need.\r\n  });\r\n\r\n  }\r\n\r\n  openPage(page) {\r\n    // Reset the content nav to have just this page\r\n    // we wouldn't want the back button to show in this scenario\r\n    this.nav.setRoot(page.component);\r\n  }\r\n  initialize(): Promise<any> {\r\n    return new Promise((resolve, reject) => {\r\n      /*let loader = this.loadingCtrl.create({\r\n        content: \"Initialisation\"\r\n      });*/\r\n      //loader.present();\r\n      let initializers = [\r\n        this.loadProjects()\r\n        //this.thematicService.initialize(), \r\n        //this.tourService.initialize(), \r\n        //this.taxonService.initialize()\r\n        ]\r\n      Promise.all(initializers)\r\n        .then(values => {\r\n          //loader.dismiss();\r\n          setTimeout(() => {\r\n            this.splashScreen.hide();\r\n          },100);\r\n\r\n      resolve()\r\n      }, (err) => {\r\n          //loader.dismiss();\r\n          console.log('Initialize Error:', err);\r\n          if( !navigator.onLine || (this.platform.is('cordova') && this.network.type == 'none' )){\r\n            this.navigateTostartPage()\r\n            \r\n            //this.needReload = 'needToReload';\r\n            //this.networkStatus = 'hasErrorNetwork';\r\n          }\r\n      })\r\n        .catch(reason => {\r\n          console.log(reason)\r\n        });\r\n    })\r\n  }\r\n  loadProjects() {\r\n  this.storage.get('projects ').then((value) => {\r\n    console.log('projects loaded !')\r\n    \r\n  }).catch(() => {\r\n    console.log('catch loading projects')\r\n  });\r\n}\r\n  navigateTostartPage(){\r\n    this.auth.loadUserCredentials().then(data => {\r\n      if(data){\r\n      this.rootPage = ProjectsPage;\r\n    } else {\r\n      this.rootPage = LoginPage2;\r\n    }\r\n  });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Injectable, Inject} from '@angular/core';\r\nimport {Http, Headers,RequestOptions} from '@angular/http';\r\nimport {Storage} from \"@ionic/storage\";\r\nimport {JwtHelper} from \"angular2-jwt\";\r\nimport * as JsSHA from 'jssha';\r\nimport 'rxjs/add/operator/map';\r\n\r\n\r\n\r\n@Injectable()\r\n\r\nexport class AuthService {\r\n  isLoggedin: boolean;\r\n  AuthToken;\r\n  contentHeader = new Headers({\"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\"});\r\n  error: string;\r\n  jwtHelper = new JwtHelper();\r\n\r\n  private LOGIN_URL = \"http://vps471185.ovh.net/portal/security/login\";\r\n  private checkuser_url = \"http://vps471185.ovh.net/portal/checkUser\";\r\n\r\n  \r\n  constructor(public http: Http,private storage: Storage) {\r\n      this.http = http;\r\n      this.isLoggedin = false;\r\n      this.AuthToken = null;\r\n  }\r\n  \r\n  storeUserCredentials(token) {\r\n      //window.localStorage.setItem('token', token);\r\n      this.storage.set('token', token);\r\n      this.useCredentials(token);\r\n      \r\n  }\r\n  \r\n  useCredentials(token) {\r\n\r\n      if(token) {\r\n        this.isLoggedin = true;\r\n        this.AuthToken = token;\r\n      } \r\n      return  this.isLoggedin;\r\n  }\r\n  \r\n  loadUserCredentials() {\r\n      //var token = this.storage.get('token');\r\n      return new Promise(resolve => {  \r\n      this.storage.get('token')\r\n      .then(\r\n          (value) => { \r\n              resolve(this.useCredentials(value));\r\n            },\r\n          (error) => { \r\n              resolve (false); \r\n        }\r\n       );\r\n      //return this.useCredentials(token);\r\n    });\r\n  }\r\n  \r\n  destroyUserCredentials() {\r\n      this.isLoggedin = false;\r\n      this.AuthToken = null;\r\n      this.storage.remove('token');\r\n      //window.localStorage.clear();\r\n  }\r\n  checkuser(credentials) {\r\n    return new Promise(resolve => {\r\n        this.http.post(this.checkuser_url,  'login='+credentials.login, { headers: this.contentHeader })\r\n        .map(res => res.json())\r\n        .subscribe(\r\n          data => {\r\n            credentials.userId = data;\r\n            resolve(credentials);\r\n  \r\n          },\r\n          err => {\r\n            resolve(false);\r\n          }\r\n        );\r\n    });\r\n  }\r\n  login(credentials) {\r\n    return new Promise(resolve => {\r\n        let password = credentials.password;\r\n        let userId =  parseInt(credentials.userId);\r\n        credentials.userId = userId;\r\n        credentials.password = this.pwd(password);\r\n        let strParams = 'userId='+userId+'&password='+this.pwd(password);\r\n        let options = new RequestOptions({ headers: this.contentHeader, withCredentials: true });\r\n        \r\n        \r\n        \r\n        this.http.post(this.LOGIN_URL, strParams, options)\r\n        .map(res => res.json())\r\n        .subscribe(\r\n          data => {\r\n            this.storeUserCredentials(data.token);\r\n            resolve(data);\r\n            //this.login(credentials)\r\n    \r\n          },\r\n          err => {\r\n            resolve(false);\r\n\r\n          }\r\n        );\r\n          \r\n        });\r\n      }\r\n  \r\n  authenticate(user) {\r\n      var creds = \"name=\" + user.name + \"&password=\" + user.password;\r\n      var headers = new Headers();\r\n      headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n      \r\n      return new Promise(resolve => {\r\n          this.http.post('http://localhost:3333/authenticate', creds, {headers: headers}).subscribe(data => {\r\n              if(data.json().success){\r\n                  this.storeUserCredentials(data.json().token);\r\n                  resolve(true);\r\n              }\r\n              else\r\n                  resolve(false);\r\n          });\r\n      });\r\n  }\r\n  /*adduser(user) {\r\n      var creds = \"name=\" + user.name + \"&password=\" + user.password;\r\n      var headers = new Headers();\r\n      headers.append('Content-Type', 'application/x-www-form-urlencoded');\r\n      \r\n      return new Promise(resolve => {\r\n          this.http.post('http://localhost:3333/adduser', creds, {headers: headers}).subscribe(data => {\r\n              if(data.json().success){\r\n                  resolve(true);\r\n              }\r\n              else\r\n                  resolve(false);\r\n          });\r\n      });\r\n  }\r\n  \r\n  getinfo() {\r\n      return new Promise(resolve => {\r\n          var headers = new Headers();\r\n          this.loadUserCredentials();\r\n          console.log(this.AuthToken);\r\n          headers.append('Authorization', 'Bearer ' +this.AuthToken);\r\n          this.http.get('http://localhost:3333/getinfo', {headers: headers}).subscribe(data => {\r\n              if(data.json().success)\r\n                  resolve(data.json());\r\n              else\r\n                  resolve(false);\r\n          });\r\n      })\r\n  }*/\r\n  \r\n  logout() {\r\n      this.destroyUserCredentials();\r\n  }\r\n  pwd(pwd) {\r\n    \r\n    pwd = window.btoa(decodeURI(decodeURIComponent( pwd )));\r\n    var hashObj = new JsSHA('SHA-1', 'B64', 1);\r\n    \r\n    hashObj.update(pwd);\r\n    pwd = hashObj.getHash('HEX');\r\n    return pwd;\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/providers/auth.ts","import { Injectable, Inject } from '@angular/core';\r\nimport { Subject }    from 'rxjs/Subject';\r\n@Injectable()\r\nexport class CommonService {\r\n  protected notify = new Subject<any>();\r\n  /**\r\n   * Observable string streams\r\n   */\r\n  notifyObservable$ = this.notify.asObservable();\r\n\r\n  constructor(){}\r\n\r\n  public notifyOther(data: any) {\r\n    if (data) {\r\n      this.notify.next(data);\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shared/notification.service.ts","import { Component, Input,ElementRef } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams,AlertController, ModalController,ToastController } from 'ionic-angular';\r\nimport { FormBuilder, FormGroup,Validators } from '@angular/forms';\r\n//import {Geolocation } from '@ionic-native/geolocation';\r\nimport {MapComponent} from '../../../components/map/map'\r\nimport { ObservationsPage } from '../../../observations/observations';\r\n//import { Storage } from '@ionic/storage';\r\nimport {ObsProvider} from '../../../providers/obs/obs'\r\nimport { CommonService } from '../../../shared/notification.service';\r\nimport { Subscription } from 'rxjs/Subscription';\r\nimport {GeoService} from '../../../shared/geolocation.notification.service';\r\nimport {PopoverAutocompPage} from'./popoverAutocompPage'\r\n\r\n\r\n@Component({\r\n  selector: 'protocol-form',\r\n  templateUrl: 'protocol-form.html',\r\n\r\n})\r\nexport class ProtocolFormComponent {\r\n\r\n    //@Input('segment') segment: string;\r\n    //@Input() obsId: number;\r\n    public formModel: FormGroup;\r\n    public dateObs : any;\r\n    public latitude: any;\r\n    public longitude: any;\r\n    private subscription: Subscription;\r\n    private geoSub :  Subscription;\r\n    private obsSaved : boolean = false;\r\n    private formChanged  : boolean = false;\r\n    private segment: string;\r\n    private obsId: number;\r\n    private projId : number;\r\n    private hideEspBtn : boolean = true;\r\n    private image : any;\r\n    private instance : any;\r\n    public parent;\r\n\r\n  constructor(public navCtrl: NavController, \r\n    public navParams: NavParams ,\r\n    public  builder: FormBuilder, \r\n    //public storage : Storage,\r\n    public data : ObsProvider,\r\n    public commonService: CommonService,\r\n    public geoServ : GeoService,\r\n    private el: ElementRef,\r\n    private alertCtrl: AlertController,\r\n    private modalCtrl: ModalController,\r\n    public toastCtrl: ToastController,\r\n    //public completeTaxaService: CompleteTaxaService\r\n   // , private geolocation: Geolocation\r\n  ) {\r\n    /*events.subscribe('formSubmit', (event, segment) => {\r\n      this.onSubmit(event, segment)\r\n    });*/\r\n    this.data.getObs(this.projId);\r\n  }\r\n    ngOnInit(protocolClass) {\r\n    //let instance : any\r\n      // update existing obs\r\n      if(this.obsId){\r\n        this.instance = new protocolClass(this.obsId)\r\n        this.data.getObsById(this.obsId).then((obs)=>{\r\n           for(var key in obs) {\r\n            this.instance[key] = obs[key];\r\n          }\r\n            this.buildForm(this.instance)\r\n            // display coordinates\r\n            this.latitude = this.instance.latitude;\r\n            this.longitude = this.instance.latitude;\r\n        });\r\n\r\n      } else {\r\n        this.instance = new protocolClass(null)\r\n        this.buildForm(this.instance)\r\n      }\r\n\r\n      this.projId = this.navParams.data.projId;\r\n\r\n      // get coordinates\r\n      /*this.geoSub = this.geoServ.notifyObservable$.subscribe((res) => {\r\n        console.log('geo service')\r\n        console.log('latitude : ' + res[0])\r\n        this.handleLatChange(res[0])\r\n        this.handleLonChange(res[1])\r\n       });*/\r\n\r\n      // subscription to notify exit view obsto store data\r\n      this.subscription = this.commonService.notifyObservable$.subscribe((res) => {\r\n       if(!this.obsSaved  && (this.formChanged)) {    // && (!this.obsId)\r\n             this.saveCurrent()\r\n       }\r\n\r\n       });\r\n  }\r\n    buildForm(model){\r\n        this.formModel = this.getFormModel(model);\r\n      // set date value\r\n      this.dateObs = Date.now();//  Date.now().getTime();\r\n   \r\n      this.formModel.value.dateObs = this.dateObs;\r\n      // detect form changes to activate \"save current obs\"\r\n      this.formModel.valueChanges.subscribe(data => {\r\n        this.formChanged = true;\r\n    })\r\n  }\r\n\r\n  getFormModel(model){\r\n    // to redefine\r\n     return this.builder.group({\r\n\r\n     });\r\n  }\r\n  onSubmit(value,segment) {\r\n    // check if model is valid\r\n    if ((!this.formModel.invalid) &&(segment =='facultatif')) {\r\n      this.formModel.value.finished = true;\r\n      this.formModel.value.projId = this.projId;\r\n      this.formUpdateData();\r\n      //this.navCtrl.pop();\r\n      this.presentToast('Observation enregistrée.', 'top' )\r\n      this.reinitform();\r\n\r\n      //this.navCtrl.push(ObservationsPage, {projId : this.projId})\r\n    } else {\r\n      if(segment =='facultatif'){\r\n        this.presentAlert()\r\n      }\r\n      \r\n    }\r\n  }\r\n  reinitform(){\r\n    this.parent.segment = 'localisation';\r\n    this.buildForm(this.instance);\r\n    this.parent.getPosition();\r\n    console.log(' initialisation form ')\r\n    console.log(this.formModel.value)\r\n    // display coordinates\r\n    this.latitude = this.instance.latitude;\r\n    this.longitude = this.instance.latitude;\r\n  }\r\n  presentAlert() {\r\n    let alert = this.alertCtrl.create({\r\n      title: 'Champs requis',\r\n      subTitle: 'Merci de saisir les champs obligatoires.',\r\n      buttons: ['Ok']\r\n    });\r\n    alert.present();\r\n  }\r\n\r\n  saveCurrent(){\r\n    let value = this.formModel.value;\r\n    value.finished = false;\r\n    this.formUpdateData();\r\n  }\r\n\r\n  formUpdateData() {\r\n    let value = this.formModel.value\r\n    // set date value\r\n    value.dateObs = this.dateObs;\r\n    // set latitude & longitude\r\n   value.latitude = this.latitude;\r\n   value.longitude = this.longitude;\r\n   value.projId = this.projId;\r\n    // set id value if exists \r\n    if(this.obsId){\r\n       value.id = this.obsId;\r\n    }\r\n    this.data.saveObs(value)\r\n    this.obsSaved = true;\r\n  }\r\n\r\n  handleLatChange(lat){\r\n    lat = lat.toFixed(5);\r\n    this.formModel.value.latitude = lat;\r\n    this.latitude = lat;\r\n  }\r\n  handleLonChange(lon){\r\n    lon = lon.toFixed(5);\r\n    this.formModel.value.longitude = lon;\r\n    this.longitude = lon;\r\n  }\r\n  ionViewDidLoad() {\r\n\r\n  }\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    //this.geoSub.unsubscribe();\r\n    //this.events.unsubscribe('formSubmit');\r\n  }\r\n  updatePosition(lat, lon) {\r\n    this.handleLatChange(lat)\r\n    this.handleLonChange(lon) \r\n  }\r\n  presentPopoverAutocomp(ev, protocole) {\r\n    ev.stopPropagation();\r\n    this.formModel.controls['nom_vernaculaire'].setValue('');\r\n    let popover = this.modalCtrl.create(PopoverAutocompPage, { parent : this, protocole : protocole},{cssClass: 'autocomp'});\r\n        /*popover.onDidDismiss(data => {\r\n          \r\n                    if(data && data.action == \"removeObs\") {\r\n                      let protoId= data.protoId\r\n                      this.data.deleteObs(this.obsId)\r\n                      this.navCtrl.pop()\r\n                    }\r\n                  });*/\r\n        popover.present({\r\n          ev: ev\r\n        });\r\n\r\n  }\r\n  presentToast(message, position) {\r\n    let toast = this.toastCtrl.create({\r\n      message: message,\r\n      duration: 2000,\r\n      position : position\r\n    });\r\n    toast.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/proto-forms/protocol-form/protocol-form.ts","import { Injectable } from '@angular/core';\r\nimport { Http } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/take';\r\n\r\n/*\r\n  Generated class for the PostsDataProvider provider.\r\n\r\n  See https://angular.io/docs/ts/latest/guide/dependency-injection.html\r\n  for more info on providers and Angular DI.\r\n*/\r\n@Injectable()\r\nexport class PostsDataProvider {\r\n  rootUrl: string = \"https://jsonplaceholder.typicode.com\";\r\n  posts : string =\"posts\";\r\n\r\n  constructor(public http: Http) {\r\n    console.log('Hello PostsDataProvider Provider');\r\n  }\r\n  getPosts(){\r\n    return this.http.get(`${this.rootUrl}/${this.posts}`).map(res =>res.json()).take(1)\r\n  }\r\n  getPostById(id:number){\r\n    console.log('pass :' + id)\r\n    return this.http.get(`${this.rootUrl}/${this.posts}/${id}`).map(res =>res.json()).take(1)\r\n\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/providers/posts-data/posts-data.ts","import { Component } from '@angular/core';\r\n\r\n/**\r\n * Generated class for the ProtocolFormComponent component.\r\n *\r\n * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html\r\n * for more info on Angular Components.\r\n */\r\n@Component({\r\n  selector: 'protocol-form',\r\n  templateUrl: 'protocol-form.html'\r\n})\r\nexport class ProtocolFormComponent {\r\n\r\n  text: string;\r\n\r\n  constructor() {\r\n    console.log('Hello ProtocolFormComponent Component');\r\n    this.text = 'Hello World';\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/protocol-form/protocol-form.ts","import { Component, ElementRef, Output, EventEmitter, Input  } from '@angular/core'\r\nimport { NavController, NavParams,Platform } from 'ionic-angular'\r\n//import { Subscription } from 'rxjs/Subscription'\r\nimport { MapNotificationService } from '../../shared/map.notification.service'\r\nimport {ProjectsServiceProvider} from '../../providers/projects-service'\r\nimport { MapModel } from '../../shared/map.model'\r\n//import { MapModel } from '../../shared/map.model'\r\nimport {Geolocation } from '@ionic-native/geolocation'\r\nimport * as geojsonBounds from 'geojson-bounds'\r\nimport { Storage } from '@ionic/storage'\r\n//import { NetworkService } from '../../shared/network.service';\r\nimport { Network } from '@ionic-native/network'\r\nimport L from \"leaflet\"\r\nimport _ from 'lodash'\r\n\r\n\r\n@Component({\r\n  selector: 'map',\r\n  templateUrl: 'map.html',\r\n  providers : [\r\n    ProjectsServiceProvider\r\n  ]\r\n})\r\n\r\nexport class MapComponent {\r\n\r\n  \r\n@Input() projId : number\r\n  /*@Output() latEvent = new EventEmitter()\r\n  @Output() lonEvent = new EventEmitter()*/\r\n\r\n  //private mapModel: MapModel\r\n   private _map: any\r\n   public mapEl\r\n   //private _bounds: any\r\n   latitude : number\r\n  longitude:number\r\n  markers:any = []\r\n  mapModel :any\r\n  public connectionStatus: String = 'online'\r\n\r\n\r\n  constructor(\r\n    public navCtrl: NavController, \r\n    public navParams: NavParams,\r\n    private el: ElementRef,\r\n    private geolocation: Geolocation,\r\n    private NotificationService: MapNotificationService,\r\n    public projectsService : ProjectsServiceProvider,\r\n    public storage : Storage,\r\n    private network :Network,\r\n    public platform :Platform\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n\r\n    this.mapModel = new MapModel()\r\n    this.mapModel.initialize({\r\n    })\r\n      .then(() => {\r\n        this.onMapReady()\r\n      })\r\n\r\n      this.network.onConnect().subscribe(data =>{\r\n        this.connectionStatus = 'online';\r\n        if(this.mapModel.tileLayer) {\r\n          this.onConnectionStatusChange()\r\n        }\r\n    \r\n      }, error=> {\r\n        console.log(error)\r\n      });\r\n    \r\n      this.network.onDisconnect().subscribe(data =>{\r\n        this.connectionStatus = 'offline';\r\n        if(this.mapModel.tileLayer) {\r\n          this.onConnectionStatusChange()\r\n        }\r\n      }, error=> {\r\n        console.log(error)\r\n      });\r\n}\r\n\r\nionViewDidEnter(){\r\n  \r\n\r\n}\r\nonMapReady() {\r\n\r\n    console.log(' map : ' + this.projId)\r\n    this.mapEl = this.el.nativeElement.querySelector('.map')\r\n    this._map = L\r\n    .map(this.mapEl, {\r\n      minZoom: 2,\r\n      maxZoom: 18\r\n\r\n      //maxBounds: this._bounds,\r\n    })\r\n    this.mapModel.tileLayer.addTo(this._map);\r\n\r\n    if (this.platform.is('cordova')) {\r\n      this.connectionStatus = this.network.type == 'none' ? 'offline' : 'online'\r\n      if(this.network.type =='unknown'){\r\n        this.connectionStatus = 'offline';\r\n      }\r\n      this.onConnectionStatusChange()\r\n}\r\n   /* L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    //bounds: this._bounds,\r\n    minZoom: 2,\r\n    maxZoom: 18,\r\n   // attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n  }).addTo(this._map);*/\r\n      // get location\r\n      this.geolocation.getCurrentPosition().then((position)=> {\r\n        this.latitude = position.coords.latitude\r\n        this.longitude = position.coords.longitude\r\n        this.onMapModelReady()\r\n      })\r\n\r\n\r\n  // add edit control\r\n  \r\n  //TODO\r\n\r\n  let geometry;\r\n  // ajouter emprise de projet\r\n  this.projectsService.getProj().then(data =>{\r\n\r\n    for(let proj in data) {\r\n        console.log(data[proj])\r\n        if(data[proj]['ID'] == this.projId ) {\r\n          geometry = data[proj]['geometry'];\r\n          if(geometry) {\r\n            this.storage.get(''+this.projId).then((data)=>{\r\n                if(!data){\r\n                  var extent = geojsonBounds.extent(geometry);\r\n                  console.log('extent');\r\n                  console.log(extent);\r\n                  let bbox = {}\r\n                  bbox['minLng'] = extent[0];\r\n                  bbox['minLat'] = extent[1];\r\n                  bbox['maxLng'] = extent[2];\r\n                  bbox['maxLat'] = extent[3];\r\n                  console.log('minLng: ' + extent[0] + \",minLat: \" + extent[1] + \" ,maxLng : \" +  extent[2] + \" ,maxLat: \" + extent[3])\r\n                  this.mapModel.downloadTiles(bbox,10,17);\r\n                  this.storage.set(''+this.projId, true);\r\n\r\n                }\r\n            });\r\n\r\n            var myLayer = L.geoJSON().addTo(this._map);\r\n            myLayer.addData(geometry);\r\n\r\n          }\r\n        }\r\n      }\r\n      \r\n  })\r\n\r\n\r\n  }\r\n\r\n\r\n\r\n\r\n  /*loadMap() {\r\n    console.log('loadind map')\r\n    //this.mapModel = new MapModel()\r\n    //this.mapModel.initialize({\r\n      //layerUrl: this.ignService.layer\r\n    })\r\n      .then(() => {\r\n        this.onMapModelReady()\r\n      })\r\n}*/\r\n    onMapModelReady() {\r\n    let center = L.latLng(this.latitude, this.longitude)\r\n    this._map.setView(center, 14)\r\n    let marker = L.marker([this.latitude, this.longitude]).addTo(this._map);\r\n    /*this._map = L\r\n      .map(this.mapEl, {\r\n        minZoom: 8,\r\n        maxZoom: 18\r\n\r\n        //maxBounds: this._bounds,\r\n      })\r\n      .setView(center, 8)\r\n\r\n      L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      //bounds: this._bounds,\r\n      minZoom: 8,\r\n      maxZoom: 12,\r\n     // attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n    }).addTo(this._map);\r\n\r\n    // notify other that map is loaded\r\n    this.NotificationService.notifyOther({map :this._map });\r\n\r\n    let marker = L.marker([this.latitude, this.longitude]).addTo(this._map);*/\r\n\r\n    //this.mapModel.tileLayer.addTo(this._map);\r\n\r\n    /*L.marker(center, { icon: this._icon })\r\n      .bindPopup('Départ')\r\n      .openPopup()\r\n      .addTo(this._map);*/\r\n\r\n    /*this._trace = L.geoJSON(this._trace, {\r\n      style: function (feature) {\r\n        return {\r\n          \"color\": \"#4928d9\",\r\n          \"weight\": 8,\r\n          \"opacity\": 0.8 };\r\n      }*/\r\n        //,\r\n      // onEachFeature: function (feature, layer) {\r\n      //     layer.bindPopup(this.tours[0].title);\r\n      // }\r\n   // }).addTo(this._map)\r\n    //this._map.fitBounds(this._trace.getBounds());\r\n\r\n    /*if (this.platform.is('cordova')) {\r\n      this.connectionStatus = this.network.type == 'none' ? 'offline' : 'online'\r\n      this.onConnectionStatusChange()\r\n    }*/\r\n}\r\ngoOnline() {\r\n  //this._map.setMinZoom(14)\r\n  //this._map.setMaxZoom(17)\r\n  if (this.platform.is('cordova')) {\r\n    this.mapModel.tileLayer.goOnline()\r\n    //this._map.setMaxBounds(this.mapModel.getCacheTileBounds())\r\n  }\r\n}\r\n\r\ngoOffline() {\r\n  //this._map.setView([this.mapModel.center.lat, this.mapModel.center.lng], this.mapModel.cacheZoom)\r\n  //this._map.setMinZoom(this.mapModel.cacheZoom)\r\n  //this._map.setMaxZoom(this.mapModel.cacheZoom)\r\n  if (this.platform.is('cordova')) {\r\n   // this._map.setMaxBounds(this.mapModel.getCacheTileBounds())\r\n    setTimeout(() => {\r\n      this.mapModel.tileLayer.goOffline()\r\n    }, 1000)\r\n  }\r\n}\r\nonConnectionStatusChange() {\r\n  if (this.connectionStatus == 'online') {\r\n    this.goOnline()\r\n  } else {\r\n    this.goOffline()\r\n  }\r\n}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/map/map.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport {ProtocolsServiceProvider} from '../providers/protocols-service';\r\nimport { ObservationPage} from '../observation/observation';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-protocols',\r\n  templateUrl: 'protocols.html',\r\n  providers : [ProtocolsServiceProvider]\r\n})\r\nexport class ProtocolsPage {\r\n\r\n  protocols : any;\r\n  projSelect :any = false;\r\n  public projId : any\r\n\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public protocolsService : ProtocolsServiceProvider) {\r\n    this.projId = navParams.get(\"projId\");\r\n    this.loadProtocols()\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n\r\n\r\n  }\r\n  ionViewWillEnter(){\r\n    console.log(' protocols  page will enter')\r\n\r\n  }\r\n\r\n  ionViewDidEnter(){\r\n    console.log(' protocols  page did enter')\r\n\r\n  }\r\n\r\n  loadProtocols (){\r\n    this.protocolsService.load()\r\n    .then(data =>{\r\n      this.protocols = data;\r\n    })\r\n\r\n  }\r\n  navToObs(id){\r\n    // get selected protocol\r\n    let protocol = this.protocols.find(x => x.id === id);\r\n    console.log(protocol);\r\n    this.navCtrl.push(ObservationPage, {protoObj:protocol, projId : this.projId});\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/protocols/protocols.ts","import { Component, Output,ElementRef, ViewChild,ComponentFactoryResolver,AfterViewInit } from '@angular/core'\r\n\r\nimport { Camera, CameraOptions } from '@ionic-native/camera';\r\nimport { File } from '@ionic-native/file';\r\nimport { Transfer } from '@ionic-native/transfer';\r\nimport { FilePath } from '@ionic-native/file-path';\r\n\r\nimport { Storage } from '@ionic/storage';\r\n\r\n//import { Validators } from '@angular/common';\r\nimport { IonicPage, NavController, NavParams, PopoverController,Platform,ToastController  } from 'ionic-angular'\r\nimport { Geolocation } from '@ionic-native/geolocation'\r\nimport { CommonService } from '../shared/notification.service'  // notify exit view to childs\r\nimport { Subscription } from 'rxjs/Subscription'\r\nimport {GeoService} from '../shared/geolocation.notification.service'\r\nimport {PopoverPage} from'./popoverPage'\r\nimport { AdDirective } from '../shared/ad.directive'\r\nimport{AdFormService} from './proto-form-provider'\r\nimport {ObsProvider} from '../providers/obs/obs'\r\n\r\ndeclare var cordova: any;\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-observation',\r\n  templateUrl: 'observation.html',\r\n  providers : [File,\r\n    Transfer,\r\n    Camera,\r\n    FilePath,  ]\r\n})\r\n\r\n\r\nexport class ObservationPage  {\r\n\r\n  @ViewChild(AdDirective) adForm: AdDirective;\r\n\r\n  protocol : any;\r\n  protocolName : any;\r\n  segment: string= 'localisation';\r\n  title: any;\r\n  obsId : number = null;\r\n  actionsStatus : boolean = true;\r\n  popover : any;\r\n  myProto : any;\r\n  projId : any\r\n  lastImage: string = null;\r\n  image : any;\r\n\r\n  constructor(public navCtrl: NavController, \r\n    public navParams: NavParams, \r\n    private platform: Platform, \r\n    private geolocation: Geolocation,\r\n    private commonService: CommonService,\r\n    private geoServ : GeoService,\r\n    private el: ElementRef,\r\n    //public events: Events,\r\n    private popoverCtrl: PopoverController,\r\n    private componentFactoryResolver: ComponentFactoryResolver,\r\n    private adFormService : AdFormService,\r\n    public toastCtrl: ToastController,\r\n    public data : ObsProvider,\r\n    private camera: Camera, private transfer: Transfer, private file: File, private filePath: FilePath ,\r\n    public storage : Storage,\r\n\r\n  ) {\r\n    this.protocol = navParams.data.protoObj;\r\n    this.projId = navParams.get(\"projId\");\r\n    this.obsId = navParams.data.obsId || 0;\r\n    //console.log('in obs page, onsId =' + this.obsId)\r\n    if(this.protocol){\r\n      this.protocolName = this.protocol.name;\r\n    }\r\n    \r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    console.log('obs load')\r\n  }\r\n   ionViewDidEnter() {\r\n    console.log('obs load')\r\n    this.title = this.protocolName;\r\n    // get coordinates for new obs\r\n    if(this.obsId == 0){\r\n      this.getPosition();\r\n    }\r\n\r\n    //this.geoServ.notifyOther();\r\n  }\r\n\r\n  onSubmit(value) {\r\n    this.myProto.onSubmit(value,this.segment)\r\n    this.switchToNextSegment()\r\n\r\n  }\r\n  ngOnInit() {\r\n\r\n  }\r\n  ionViewWillLeave() {\r\n\r\n    this.commonService.notifyOther({option: 'call', value: 'exit view'});\r\n\r\n  }\r\n  onSegmentChanged($event) {\r\n    let btn = this.el.nativeElement.querySelector('.btnsubmit')\r\n    if (($event._value == 'localisation') || ($event._value == 'obligatoire')) {\r\n       btn.innerText = 'Suivant';\r\n       // display or hide btn \"plus d'actions\"\r\n       this.actionsStatus = true;\r\n       this.myProto.hideEspBtn = true;\r\n       \r\n     }\r\n    else {\r\n      btn.innerText = 'Terminer';\r\n      this.actionsStatus = false;\r\n      this.myProto.hideEspBtn = true;\r\n    }\r\n    if (($event._value == 'obligatoire')) {\r\n      this.actionsStatus = false;\r\n      this.myProto.hideEspBtn = false;\r\n    }\r\n    this.myProto.segment = this.segment;\r\n  }\r\n  switchToNextSegment(){\r\n    console.log('segment')\r\n    let btn = this.el.nativeElement.querySelector('.btnsubmit')\r\n    if((this.segment == 'localisation')&&( btn.innerText != 'TERMINER')) {\r\n      this.segment = 'obligatoire'\r\n      this.actionsStatus = true\r\n      this.myProto.hideEspBtn = true;\r\n    } \r\n    else if(this.segment == 'obligatoire'){\r\n      this.segment ='facultatif';\r\n      btn.innerText = 'Terminer';\r\n      this.myProto.hideEspBtn = false;\r\n      this.actionsStatus = false;\r\n    } else {\r\n      this.actionsStatus = false;\r\n      this.myProto.hideEspBtn = true;\r\n    }\r\n    this.myProto.segment = this.segment\r\n  }\r\n\r\n  getbtnSubmitWidth(){\r\n    if(this.segment == 'localisation') {\r\n      return \"100%\"\r\n    } else {\r\n      return \"50%\"\r\n    }\r\n  }\r\n  presentPopoverActions(ev) {\r\n    \r\n        let popover = this.popoverCtrl.create(PopoverPage, {obsId : this.obsId, parent : this, projId : this.projId},{cssClass: 'obs-actions'});\r\n        /*popover.onDidDismiss(data => {\r\n          \r\n                    if(data && data.action == \"removeObs\") {\r\n                      let protoId= data.protoId\r\n                      this.data.deleteObs(this.obsId)\r\n                      this.navCtrl.pop()\r\n                    }\r\n                  });*/\r\n        popover.present({\r\n          ev: ev\r\n        });\r\n\r\n  }\r\n  ngAfterViewInit() {\r\n    this.loadComponent();\r\n\r\n  }\r\n  loadComponent() {\r\n\r\n    let component = this.adFormService.getComponent(this.protocolName)\r\n\r\n    let componentFactory = this.componentFactoryResolver.resolveComponentFactory(component);\r\n\r\n    let viewContainerRef = this.adForm.viewContainerRef;\r\n    viewContainerRef.clear();\r\n\r\n    let componentRef = viewContainerRef.createComponent(componentFactory);\r\n\r\n\r\n\t\tthis.myProto= componentRef.instance;\r\n    this.myProto.segment = this.segment;\r\n    this.myProto.obsId = this.obsId;\r\n    this.myProto.projId = this.projId;\r\n    this.myProto.parent = this;\r\n\r\n  }\r\n  getPosition(){\r\n      this.platform.ready().then(() => {\r\n      // get current position\r\n      //this.presentToast('get coordinates', 'top')\r\n      // TODO spinner get coordinates\r\n      this.geolocation.getCurrentPosition({enableHighAccuracy:true, timeout: 12000, maximumAge: 0}).then(pos => {\r\n        //this.presentToast('lat: '+ pos.coords.latitude + \", lon: \" +pos.coords.longitude, 'top' )\r\n        this.myProto.updatePosition(pos.coords.latitude ,pos.coords.longitude);\r\n\r\n      }, (err) => {\r\n        this.presentToast('erreur gps', 'top' )\r\n      });\r\n      }).catch((error) => {\r\n        //console.log('Error getting location', error);\r\n        this.presentToast('Error getting location : ' + error, 'top' )\r\n      });;\r\n  }\r\n  presentToast(message, position) {\r\n    let toast = this.toastCtrl.create({\r\n      message: message,\r\n      duration: 3000,\r\n      position : position\r\n    });\r\n    toast.present();\r\n  }\r\n  takePicture(){\r\n    const options: CameraOptions = {\r\n      quality: 100,\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      mediaType: this.camera.MediaType.PICTURE\r\n    }\r\n    \r\n     // Get the data of an image\r\n     this.platform.ready().then(() => {\r\n       \r\n     this.camera.getPicture({\r\n      destinationType: this.camera.DestinationType.DATA_URL,\r\n      sourceType: this.camera.PictureSourceType.CAMERA,\r\n      mediaType: this.camera.MediaType.PICTURE,\r\n      encodingType: this.camera.EncodingType.JPEG,\r\n      correctOrientation: true\r\n  }).then((imageData) => {\r\n    // imageData is a base64 encoded string\r\n      this.image = \"data:image/jpeg;base64,\" + imageData;\r\n      console.log(this.image);\r\n      this.storage.set('image', this.image);\r\n      this.myProto.image = this.image;\r\n      //this.fileURL = imageData;\r\n      //this.images.push(this.base64Image);\r\n      //this.isPicture = 1;\r\n      //this.uploadPictures(this.fileURL);\r\n  }, (err) => {\r\n      console.log(err);\r\n  });\r\n\r\n})\r\n\r\n}\r\n\r\n/*private copyFileToLocalDir(namePath, currentName, newFileName) {\r\n  this.file.copyFile(namePath, currentName, cordova.file.dataDirectory, newFileName).then(success => {\r\n    this.lastImage = newFileName;\r\n    console.log('fichier image');\r\n    alert(namePath);\r\n    console.log(newFileName);\r\n  }, error => {\r\n   // this.presentToast('Error while storing file.');\r\n  });\r\n}\r\n// Create a new name for the image\r\nprivate createFileName() {\r\n  var d = new Date(),\r\n  n = d.getTime(),\r\n  newFileName =  n + \".jpg\";\r\n  return newFileName;\r\n}*/\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/observation/observation.ts"],"sourceRoot":""}